// ==UserScript==
// @name        PlayCanvas Code Editor Patch
// @namespace   yaustar
// @match       https://playcanvas.com/editor/code/*
// @grant       none
// @version     0.2
// @author      @yaustar
// @description yaustar's PlayCanvas Code Editor Patch
// ==/UserScript==


(function () {
    const addTypeDefinitions = function (b64, url, doneCallback) {
        fetch(editorApiB64).then((response) => {
            if (response.ok) {
                response.text().then((code) => {
                    monaco.languages.typescript.javascriptDefaults.addExtraLib(code, 'https://editor-api.yau');
                    if (doneCallback) {
                        doneCallback();
                    }
                });
            }
        });
    };

    const onMonaco = function () {
        addTypeDefinitions(editorApiB64, 'https://editor-api.yau', () => { console.log('Added Editor API type definitions'); });
    };

    // Check if Monaco exists
    const codeEditorPoll = setInterval(function () {
        if (window.monaco) {
            onMonaco();
            clearInterval(codeEditorPoll);
        }
    }, 500);

    const editorApiB64 = "data:@file/octet-stream;base64,aW1wb3J0ICogYXMgX3BsYXljYW52YXNfb2JzZXJ2ZXIgZnJvbSAnQHBsYXljYW52YXMvb2JzZXJ2ZXInOwppbXBvcnQgeyBFdmVudHMsIE9ic2VydmVyLCBPYnNlcnZlckhpc3RvcnksIE9ic2VydmVyTGlzdCwgSGlzdG9yeSBhcyBIaXN0b3J5JDEgfSBmcm9tICdAcGxheWNhbnZhcy9vYnNlcnZlcic7CgovKioKICogV3JhcHBlciBhcm91bmQgbmF0aXZlIGxvY2FsIHN0b3JhZ2UKICoKICogQGNhdGVnb3J5IEludGVybmFsCiAqLwpkZWNsYXJlIGNsYXNzIExvY2FsU3RvcmFnZSB7CiAgICBfY2FjaGU6IHt9OwogICAgLyoqCiAgICAgKiBHZXRzIGEga2V5IGZyb20gbG9jYWxTdG9yYWdlCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIFRoZSBrZXkKICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFRoZSB2YWx1ZQogICAgICovCiAgICBnZXQoa2V5OiBzdHJpbmcpOiBvYmplY3Q7CiAgICAvKioKICAgICAqIFN0b3JlcyBhIGtleS12YWx1ZSB0byBsb2NhbFN0b3JhZ2UKICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIGtleQogICAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlIC0gVGhlIHZhbHVlCiAgICAgKi8KICAgIHNldChrZXk6IHN0cmluZywgdmFsdWU6IG9iamVjdCk6IHZvaWQ7CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBrZXkgZnJvbSBsb2NhbFN0b3JhZ2UKICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIGtleQogICAgICovCiAgICB1bnNldChrZXk6IHN0cmluZyk6IHZvaWQ7CiAgICAvKioKICAgICAqIENoZWNrcyBpZiBrZXkgZXhpc3RzIGluIGxvY2FsIHN0b3JhZ2UKICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gVGhlIGtleQogICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgb3IgZmFsc2UKICAgICAqLwogICAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbjsKfQoKLyoqCiAqIFJlcHJlc2VudHMgYSBjdXN0b20gY2xpcGJvYXJkIHdpdGggYSBzcGVjaWZpYyBuYW1lCiAqIHdoaWNoIHN0b3JlcyBhIHZhbHVlIGluIGxvY2FsU3RvcmFnZSB1bmRlciB0aGF0IG5hbWUKICoKICogQGNhdGVnb3J5IEludGVybmFsCiAqLwpkZWNsYXJlIGNsYXNzIENsaXBib2FyZCB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY2xpcGJvYXJkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcpOwogICAgX25hbWU6IHN0cmluZzsKICAgIF9zdG9yYWdlOiBMb2NhbFN0b3JhZ2U7CiAgICAvKioKICAgICAqIEdldHMgd2hldGhlciB0aGUgY2xpcGJvYXJkIGlzIGVtcHR5CiAgICAgKgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBlbXB0eSgpOiBib29sZWFuOwogICAgLyoqCiAgICAgKiBTZXRzIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gdGhlIGNsaXBib2FyZC4gUGFzcyBudWxsIHRvIGNsZWFyIHRoZSB2YWx1ZSBmcm9tIHN0b3JhZ2UuCiAgICAgKgogICAgICogQHR5cGUge29iamVjdH0KICAgICAqLwogICAgc2V0IHZhbHVlKGFyZzogYW55KTsKICAgIC8qKgogICAgICogR2V0cyB0aGUgdmFsdWUgc3RvcmVkIGluIHRoZSBjbGlwYm9hcmQuCiAgICAgKgogICAgICogQHR5cGUge29iamVjdH0KICAgICAqLwogICAgZ2V0IHZhbHVlKCk6IGFueTsKfQoKLyoqCiAqIEZhY2lsaXRhdGVzIHRyYWNraW5nIG9mIGFzeW5jaHJvbm91cyBqb2JzLgogKgogKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICovCmRlY2xhcmUgY2xhc3MgSm9icyBleHRlbmRzIEV2ZW50cyB7CiAgICBfam9ic0luUHJvZ3Jlc3M6IHt9OwogICAgLyoqCiAgICAgKiBBZGRzIGEgbmV3IGpvYi4gVGhlIHNwZWNpZmllZCBmdW5jdGlvbiB3aWxsIGJlIHJldHVybmVkIHdoZW4gdGhlCiAgICAgKiBqb2IgaXMgZmluaXNoZWQuCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBBIGZ1bmN0aW9uIHRvIGJlIHN0b3JlZCBmb3IgdGhpcyBqb2IuCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIGEgam9iIGlkCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogY29uc3Qgam9iSWQgPSBlZGl0b3Iuam9icy5zdGFydCgoKSA9PiBjb25zb2xlLmxvZygnam9iIHdhcyBmaW5pc2hlZCcpKTsKICAgICAqIGVkaXRvci5qb2JzLmZpbmlzaChqb2JJZCkoKTsgLy8gcHJpbnRzICdqb2Igd2FzIGZpbmlzaGVkJwogICAgICogYGBgCiAgICAgKi8KICAgIHN0YXJ0KGZuOiBGdW5jdGlvbik6IHN0cmluZzsKICAgIC8qKgogICAgICogTm90aWZpZXMgdGhhdCBhIGpvYiBoYXMgZmluaXNoZWQuIFRoZSBzcGVjaWZpZWQgam9iCiAgICAgKiBpZCBpcyByZW1vdmVkIGFuZCB0aGUgY2FsbGJhY2sgc3RvcmVkIHdoZW4gdGhlIGpvYiB3YXMKICAgICAqIHN0YXJ0ZWQgaXMgcmV0dXJuZWQuCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IGpvYklkIC0gVGhlIGpvYiBpZAogICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBUaGUgZnVuY3Rpb24gc3RvcmVkIHdoZW4gdGhlIGpvYiB3YXMgc3RhcnRlZAogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IGpvYklkID0gZWRpdG9yLmpvYnMuc3RhcnQoKCkgPT4gY29uc29sZS5sb2coJ2pvYiB3YXMgZmluaXNoZWQnKSk7CiAgICAgKiBlZGl0b3Iuam9icy5maW5pc2goam9iSWQpKCk7IC8vIHByaW50cyAnam9iIHdhcyBmaW5pc2hlZCcKICAgICAqIGBgYAogICAgICovCiAgICBmaW5pc2goam9iSWQ6IHN0cmluZyk6IEZ1bmN0aW9uOwp9CgovKioKICogVGhlIE1lc3NlbmdlciBBUEkuIFRoZSBtZXNzZW5nZXIgcmVjZWl2ZXMgbWVzc2FnZXMKICogd2hlbiB2YXJpb3VzIHRoaW5ncyBoYXBwZW4gZS5nLiBhbiBhc3NldCBpcyBjcmVhdGVkIGV0Yy4KICoKICogQGNhdGVnb3J5IEludGVybmFsCiAqLwpkZWNsYXJlIGNsYXNzIE1lc3NlbmdlciBleHRlbmRzIEV2ZW50cyB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IG1lc3NlbmdlciAtIFRoZSBpbnN0YW5jZSBvZiB0aGUgTWVzc2VuZ2VyIGNsaWVudCAtIHRoaXMgaXMKICAgICAqIGEgZGlmZmVyZW50IGNsYXNzIHdoaWNoIHJlcXVpcmVzIHRoZSBNZXNzZW5nZXIgY2xpZW50IGxpYnJhcnkgdG8gYmUgZG93bmxvYWRlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IobWVzc2VuZ2VyOiBvYmplY3QpOwogICAgX21lc3NlbmdlcjogYW55OwogICAgX3VybDogc3RyaW5nOwogICAgX29uQ29ubmVjdCgpOiB2b2lkOwogICAgX29uV2VsY29tZSgpOiB2b2lkOwogICAgX29uTWVzc2FnZShkYXRhOiBhbnkpOiB2b2lkOwogICAgLyoqCiAgICAgKiBDb25uZWN0cyB0byB0aGUgbWVzc2VuZ2VyIHNlcnZlci4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIHNlcnZlciBVUkwKICAgICAqLwogICAgY29ubmVjdCh1cmw6IHN0cmluZyk6IHZvaWQ7CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgY29ubmVjdGVkIHRvIHRoZSBtZXNzZW5nZXIgc2VydmVyLgogICAgICoKICAgICAqIEB0eXBlIHtib29sZWFufQogICAgICovCiAgICBnZXQgaXNDb25uZWN0ZWQoKTogYm9vbGVhbjsKfQoKLyoqCiAqIFJlcHJlc2VudHMgdGhlIHNldHRpbmdzIGZvciB0aGUgY3VycmVudGx5IGxvYWRlZCBzY2VuZS4KICogRm9yIGEgbGlzdCBvZiBwcm9wZXJ0aWVzIHNlZSBbaGVyZV0oU2NlbmVTZXR0aW5nc1Byb3BlcnRpZXMubWQpLgogKi8KZGVjbGFyZSBjbGFzcyBTY2VuZVNldHRpbmdzIGV4dGVuZHMgRXZlbnRzIHsKICAgIC8qKgogICAgICogSW5pdGlhbGl6ZSBpbnRlcm5hbCBvYnNlcnZlciBhbmQgaGlzdG9yeS4KICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCiAgICBwcml2YXRlIF9pbml0aWFsaXplT2JzZXJ2ZXI7CiAgICBfb2JzZXJ2ZXI6IE9ic2VydmVyOwogICAgX2hpc3Rvcnk6IE9ic2VydmVySGlzdG9yeTsKICAgIC8qKgogICAgICogQ2FsbGVkIHdoZW4gYSBzY2VuZSBpcyBsb2FkZWQuCiAgICAgKgogICAgICogQHByaXZhdGUKICAgICAqIEB0eXBlZGVmIHtpbXBvcnQoIi4uL3JlYWx0aW1lL3NjZW5lIikuUmVhbHRpbWVTY2VuZX0gUmVhbHRpbWVTY2VuZQogICAgICogQHBhcmFtIHtSZWFsdGltZVNjZW5lfSBzY2VuZSAtIFRoZSBsb2FkZWQgc2NlbmUKICAgICAqLwogICAgcHJpdmF0ZSBfb25Mb2FkU2NlbmU7CiAgICAvKioKICAgICAqIENoZWNrcyBpZiBwYXRoIGV4aXN0cy4gU2VlIFtoZXJlXShTY2VuZVNldHRpbmdzUHJvcGVydGllcy5tZCkgZm9yIGEgbGlzdCBvZiBwcm9wZXJ0aWVzLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGgKICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHBhdGggZXhpc3RzCiAgICAgKgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnNvbGUubG9nKGVkaXRvci5zZXR0aW5ncy5zY2VuZS5oYXMoJ3JlbmRlci5mb2cnKSk7CiAgICAgKiBgYGAKICAgICAqLwogICAgaGFzKHBhdGg6IHN0cmluZyk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIEdldHMgdmFsdWUgYXQgcGF0aC4gU2VlIFtoZXJlXShTY2VuZVNldHRpbmdzUHJvcGVydGllcy5tZCkgZm9yIGEgbGlzdCBvZiBwcm9wZXJ0aWVzLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGgKICAgICAqIEByZXR1cm5zIHthbnl9IFRoZSB2YWx1ZQogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnNvbGUubG9nKGVkaXRvci5zZXR0aW5ncy5zY2VuZS5nZXQoJ3JlbmRlci5mb2cnKSk7CiAgICAgKiBgYGAKICAgICAqLwogICAgZ2V0KHBhdGg6IHN0cmluZyk6IGFueTsKICAgIC8qKgogICAgICogU2V0cyB2YWx1ZSBhdCBwYXRoLiBTZWUgW2hlcmVdKFNjZW5lU2V0dGluZ3NQcm9wZXJ0aWVzLm1kKSBmb3IgYSBsaXN0IG9mIHByb3BlcnRpZXMuCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aAogICAgICogQHBhcmFtIHthbnl9IHZhbHVlIC0gVGhlIHZhbHVlCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdmFsdWUgd2FzIHNldAogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGVkaXRvci5zZXR0aW5ncy5zY2VuZS5zZXQoJ3JlbmRlci5mb2cnLCAnbm9uZScpOwogICAgICogYGBgCiAgICAgKi8KICAgIHNldChwYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBib29sZWFuOwogICAgLyoqCiAgICAgKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50YXRpb24gb2Ygc2NlbmUgc2V0dGluZ3MgZGF0YQogICAgICoKICAgICAqIEByZXR1cm5zIHtvYmplY3R9IC0gVGhlIGRhdGEKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnNvbGUubG9nKGVkaXRvci5zZXR0aW5ncy5zY2VuZS5qc29uKCkpOwogICAgICogYGBgCiAgICAgKi8KICAgIGpzb24oKTogb2JqZWN0OwogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBoaXN0b3J5IG9iamVjdCBmb3IgdGhpcyBlbnRpdHkKICAgICAqCiAgICAgKiBAdHlwZSB7T2JzZXJ2ZXJIaXN0b3J5fQogICAgICovCiAgICBnZXQgaGlzdG9yeSgpOiBPYnNlcnZlckhpc3Rvcnk7Cn0KCi8qKgogKiBUaGUgc2V0dGluZ3MgZWRpdG9yIEFQSQogKi8KZGVjbGFyZSBjbGFzcyBTZXR0aW5ncyBleHRlbmRzIEV2ZW50cyB7CiAgICBfc2NlbmVTZXR0aW5nczogYW55OwogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBzZXR0aW5ncyBmb3IgdGhlIGN1cnJlbnRseSBsb2FkZWQgc2NlbmUuCiAgICAgKgogICAgICogQHR5cGUge1NjZW5lU2V0dGluZ3N9CiAgICAgKi8KICAgIGdldCBzY2VuZSgpOiBTY2VuZVNldHRpbmdzOwp9CgovKioKICogUmVwcmVzZW50cyBhbiBFbnRpdHkuIEZvciBhIGxpc3Qgb2YgRW50aXR5IHByb3BlcnRpZXMgc2VlIFtoZXJlXShFbnRpdHlQcm9wZXJ0aWVzLm1kKS4KICovCmRlY2xhcmUgY2xhc3MgRW50aXR5IGV4dGVuZHMgRXZlbnRzIHsKICAgIC8qKiBAdHlwZWRlZiB7aW1wb3J0KCIuL2VudGl0aWVzIikuRW50aXRpZXN9IEVudGl0aWVzICovCiAgICAvKioKICAgICAqIENyZWF0ZXMgbmV3IEVudGl0eQogICAgICoKICAgICAqIEBjYXRlZ29yeSBJbnRlcm5hbAogICAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgLSBPcHRpb25hbCBlbnRpdHkgZGF0YQogICAgICovCiAgICBjb25zdHJ1Y3RvcihkYXRhPzogb2JqZWN0KTsKICAgIF9vYnNlcnZlcjogT2JzZXJ2ZXI7CiAgICBfaGlzdG9yeToge307CiAgICBfaW5pdGlhbGl6ZUhpc3RvcnkoKTogdm9pZDsKICAgIC8qKgogICAgICogQ2hlY2tzIGlmIHBhdGggZXhpc3RzLiBTZWUgW2hlcmVdKEVudGl0eVByb3BlcnRpZXMubWQpIGZvciBhIGxpc3Qgb2YgcHJvcGVydGllcy4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBwYXRoIGV4aXN0cwogICAgICoKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiBjb25zb2xlLmxvZyhlbnRpdHkuaGFzKCdjb21wb25lbnRzLm1vZGVsJykpOwogICAgICogYGBgCiAgICAgKi8KICAgIGhhcyhwYXRoOiBzdHJpbmcpOiBib29sZWFuOwogICAgLyoqCiAgICAgKiBHZXRzIHZhbHVlIGF0IHBhdGguIFNlZSBbaGVyZV0oRW50aXR5UHJvcGVydGllcy5tZCkgZm9yIGEgbGlzdCBvZiBwcm9wZXJ0aWVzLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGgKICAgICAqIEByZXR1cm5zIHthbnl9IFRoZSB2YWx1ZQogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnNvbGUubG9nKGVudGl0eS5nZXQoJ3Bvc2l0aW9uJykpOwogICAgICogYGBgCiAgICAgKi8KICAgIGdldChwYXRoOiBzdHJpbmcpOiBhbnk7CiAgICAvKioKICAgICAqIFNldHMgdmFsdWUgYXQgcGF0aC4gU2VlIFtoZXJlXShFbnRpdHlQcm9wZXJ0aWVzLm1kKSBmb3IgYSBsaXN0IG9mIHByb3BlcnRpZXMuCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aAogICAgICogQHBhcmFtIHthbnl9IHZhbHVlIC0gVGhlIHZhbHVlCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdmFsdWUgd2FzIHNldAogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGVudGl0eS5zZXQoJ3Bvc2l0aW9uJywgWzEsIDAsIDBdKTsKICAgICAqIGBgYAogICAgICovCiAgICBzZXQocGF0aDogc3RyaW5nLCB2YWx1ZTogYW55KTogYm9vbGVhbjsKICAgIC8qKgogICAgICogVW5zZXRzIHZhbHVlIGF0IHBhdGguIFNlZSBbaGVyZV0oRW50aXR5UHJvcGVydGllcy5tZCkgZm9yIGEgbGlzdCBvZiBwcm9wZXJ0aWVzLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGgKICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSB2YWx1ZSB3YXMgdW5zZXQKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiBlbnRpdHkudW5zZXQoJ2NvbXBvbmVudHMubW9kZWwnKTsKICAgICAqIGBgYAogICAgICovCiAgICB1bnNldChwYXRoOiBzdHJpbmcpOiBib29sZWFuOwogICAgLyoqCiAgICAgKiBJbnNlcnRzIHZhbHVlIGluIGFycmF5IGF0IHBhdGgsIGF0IHNwZWNpZmllZCBpbmRleC4gU2VlIFtoZXJlXShFbnRpdHlQcm9wZXJ0aWVzLm1kKSBmb3IgYSBsaXN0IG9mIHByb3BlcnRpZXMuCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aAogICAgICogQHBhcmFtIHthbnl9IHZhbHVlIC0gVGhlIHZhbHVlCiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBUaGUgaW5kZXggKGlmIHVuZGVmaW5lZCB0aGUgdmFsdWUgd2lsbCBiZSBpbnNlcnRlZCBpbiB0aGUgZW5kKQogICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHZhbHVlIHdhcyBpbnNlcnRlZAogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGVudGl0eS5pbnNlcnQoJ3RhZ3MnLCAnYV90YWcnKTsKICAgICAqIGBgYAogICAgICovCiAgICBpbnNlcnQocGF0aDogc3RyaW5nLCB2YWx1ZTogYW55LCBpbmRleDogbnVtYmVyKTogYm9vbGVhbjsKICAgIC8qKgogICAgICogUmVtb3ZlIHZhbHVlIGZyb20gYXJyYXkgYXQgcGF0aC4gU2VlIFtoZXJlXShFbnRpdHlQcm9wZXJ0aWVzLm1kKSBmb3IgYSBsaXN0IG9mIHByb3BlcnRpZXMuCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aAogICAgICogQHBhcmFtIHthbnl9IHZhbHVlIC0gVGhlIHZhbHVlCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdmFsdWUgd2FzIHJlbW92ZWQKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGVudGl0eS5yZW1vdmVWYWx1ZSgndGFncycsICdhX3RhZycpOwogICAgICogYGBgCiAgICAgKi8KICAgIHJlbW92ZVZhbHVlKHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIFJldHVybnMgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBlbnRpdHkgZGF0YQogICAgICoKICAgICAqIEByZXR1cm5zIHtvYmplY3R9IC0gVGhlIGRhdGEKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnNvbGUubG9nKGVudGl0eS5qc29uKCkpOwogICAgICogYGBgCiAgICAgKi8KICAgIGpzb24oKTogb2JqZWN0OwogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBlbnRpdHkgZGF0YS4gVGhlIGNoaWxkcmVuIGFycmF5CiAgICAgKiBvZiB0aGUgZW50aXR5IGdldHMgcmVjdXJzaXZlbHkgY29udmVydGVkIHRvIGFuIGFycmF5IG9mIGVudGl0eSBkYXRhCiAgICAgKiBpbnN0ZWFkIG9mIGNvbnRhaW5pbmcgY2hpbGRyZW4gcmVzb3VyY2UgaWRzLgogICAgICoKICAgICAqIEByZXR1cm5zIHtvYmplY3R9IC0gVGhlIGRhdGEKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IGRhdGEgPSBlbnRpdHkuanNvbkhpZXJhcmNoeSgpOwogICAgICogY29uc29sZS5sb2coZGF0YS5jaGlsZHJlblswXS5uYW1lKTsKICAgICAqIGBgYAogICAgICovCiAgICBqc29uSGllcmFyY2h5KCk6IG9iamVjdDsKICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZW50aXR5IGlzIGEgZGVzY2VuZGFudCBvZiB0aGUgc3BlY2lmaWVkIHBhcmVudCBlbnRpdHkuCiAgICAgKgogICAgICogQHBhcmFtIHtFbnRpdHl9IHBhcmVudCAtIFRoZSBwYXJlbnQKICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGl0IGlzCiAgICAgKi8KICAgIGlzRGVzY2VuZGFudE9mKHBhcmVudDogRW50aXR5KTogYm9vbGVhbjsKICAgIC8qKgogICAgICogRmluZHMgZmlyc3QgZW50aXR5IGJ5IG5hbWUgdXNpbmcgZGVwdGgtZmlyc3Qgc2VhcmNoCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgbmFtZQogICAgICogQHJldHVybnMge0VudGl0eX0gVGhlIGVudGl0eQogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IGRvb3IgPSBlZGl0b3IuZW50aXRpZXMucm9vdC5maW5kQnlOYW1lKCdEb29yJyk7CiAgICAgKiBgYGAKICAgICAqLwogICAgZmluZEJ5TmFtZShuYW1lOiBzdHJpbmcpOiBFbnRpdHk7CiAgICAvKioKICAgICAqIEZpbmRzIGFsbCBlbnRpdGllcyB3aXRoIHNwZWNpZmllZCB0YWdzCiAgICAgKgogICAgICogQHBhcmFtIHsuLi5zdHJpbmd8Li4uc3RyaW5nW119IHRhZ3MgLSBUaGUgdGFncy4gSWYgbXVsdGlwbGUgdGFncyBhcmUgc3BlY2lmaWVkIHRoZW4gZW50aXRpZXMgdGhhdCBjb250YWluIEFOWSBvZiB0aGUgc3BlY2lmaWVkCiAgICAgKiB0YWdzIHdpbGwgYmUgaW5jbHVkZWQuIElmIGFuIGFyZ3VtZW50IGlzIGFuIGFycmF5IG9mIHRhZ3MgdGhlbiBlbnRpdGllcyB0aGF0IGNvbnRhaW4gQUxMIG9mIHRoZSB0YWdzIGluIHRoZSBhcnJheSB3aWxsIGJlIGluY2x1ZGVkLgogICAgICogQHJldHVybnMge0VudGl0eVtdfSBUaGUgZW50aXRpZXMKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiAvLyBlbnRpdGllcyB0aGF0IGhhdmUgdGhlIGZvbGxvd2luZyB0YWcKICAgICAqIGNvbnN0IGVudGl0aWVzID0gZWRpdG9yLmVudGl0aWVzLnJvb3QubGlzdEJ5VGFnKCd0YWcnKTsKICAgICAqIC8vIGVudGl0aWVzIHRoYXQgaGF2ZSBhbnkgb2YgdGhlIGZvbGxvd2luZyB0YWdzCiAgICAgKiBjb25zdCBlbnRpdGllcyA9IGVkaXRvci5lbnRpdGllcy5yb290Lmxpc3RCeVRhZygndGFnJywgJ3RhZzInKTsKICAgICAqIC8vIGVudGl0aWVzIHRoYXQgaGF2ZSBhbGwgb2YgdGhlIGZvbGxvd2luZyB0YWdzCiAgICAgKiBjb25zdCBlbnRpdGllcyA9IGVkaXRvci5lbnRpdGllcy5yb290Lmxpc3RCeVRhZyhbJ3RhZycsICd0YWcyJ10pOwogICAgICogYGBgCiAgICAgKi8KICAgIGxpc3RCeVRhZyguLi50YWdzOiBhbnlbXSk6IEVudGl0eVtdOwogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBlbnRpdHkgYW5kIGNoaWxkcmVuIHRoYXQgc2F0aXNmeSB0aGUgZnVuY3Rpb24KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiBFbnRpdHkgYW5kIHJldHVybnMgd2hldGhlciBpdCBzaG91bGQgYmUgaW5jbHVkZWQKICAgICAqIGluIHRoZSByZXN1bHQKICAgICAqIEByZXR1cm5zIHtFbnRpdHlbXX0gVGhlIHJlc3VsdAogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IGRvb3JzID0gZWRpdG9yLmVudGl0aWVzLnJvb3QuZmlsdGVyKGVudGl0eSA9PiBlbnRpdHkuZ2V0KCduYW1lJykuc3RhcnRzV2l0aCgnZG9vcicpKTsKICAgICAqIGBgYAogICAgICovCiAgICBmaWx0ZXIoZm46IEZ1bmN0aW9uKTogRW50aXR5W107CiAgICAvKioKICAgICAqIEV4ZWN1dGVzIGZ1bmN0aW9uIGZvciB0aGlzIGVudGl0eSBhbmQgaXRzIGNoaWxkcmVuCiAgICAgKiBpbiBkZXB0aCBmaXJzdCBvcmRlci4KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiBlbnRpdHkgYXMgYW4gYXJndW1lbnQKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiAvLyBnZXQgYSBsaXN0IG9mIGFsbCBlbnRpdGllcyBpbiB0aGUgZ3JhcGggaW4gZGVwdGggZmlyc3Qgb3JkZXIKICAgICAqIGNvbnN0IGVudGl0aWVzID0gW107CiAgICAgKiBlZGl0b3IuZW50aXRpZXMucm9vdC5kZXB0aEZpcnN0KGVudGl0eSA9PiBlbnRpdGllcy5wdXNoKGVudGl0eSkpOwogICAgICogYGBgCiAgICAgKi8KICAgIGRlcHRoRmlyc3QoZm46IEZ1bmN0aW9uKTogdm9pZDsKICAgIC8qKgogICAgICogQWRkcyBhIGNvbXBvbmVudCB0byB0aGlzIEVudGl0eQogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wb25lbnQgLSBUaGUgY29tcG9uZW50IG5hbWUKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIC0gRGVmYXVsdCBjb21wb25lbnQgZGF0YS4gRGVmYXVsdHMgdmFsdWVzIHdpbGwgYmUgdXNlZCBmb3IgYW55IG1pc3NpbmcgZmllbGRzLgogICAgICogRm9yIGRldGFpbHMgb24gY29tcG9uZW50IHByb3BlcnRpZXMgc2VlIHNlZSBbaGVyZV0oRW50aXR5UHJvcGVydGllcy5tZCkuCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogZWRpdG9yLmVudGl0aWVzLnJvb3QuYWRkQ29tcG9uZW50KCdtb2RlbCcsIHsKICAgICAqICAgICB0eXBlOiAnYm94JwogICAgICogfSk7CiAgICAgKiBgYGAKICAgICAqLwogICAgYWRkQ29tcG9uZW50KGNvbXBvbmVudDogc3RyaW5nLCBkYXRhPzogb2JqZWN0KTogdm9pZDsKICAgIC8qKgogICAgICogUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIHRoaXMgRW50aXR5CiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudCAtIFRoZSBjb21wb25lbnQgbmFtZQogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGVkaXRvci5lbnRpdGllcy5yb290LnJlbW92ZUNvbXBvbmVudCgnbW9kZWwnKTsKICAgICAqIGBgYAogICAgICovCiAgICByZW1vdmVDb21wb25lbnQoY29tcG9uZW50OiBzdHJpbmcpOiB2b2lkOwogICAgLyoqCiAgICAgKiBBZGRzIGVudGl0eSBhcyBhIGNoaWxkCiAgICAgKgogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IC0gVGhlIGVudGl0eQogICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGNoaWxkIHdhcyBhZGRlZAogICAgICovCiAgICBhZGRDaGlsZChlbnRpdHk6IEVudGl0eSk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIEluc2VydHMgZW50aXR5IGFzIGEgY2hpbGQgYXQgc3BlY2lmaWVkIGluZGV4LgogICAgICoKICAgICAqIEBjYXRlZ29yeSBJbnRlcm5hbAogICAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eSAtIFRoZSBlbnRpdHkKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBpbmRleC4gSWYgdW5kZWZpbmVkIHRoZSBjaGlsZCB3aWxsIGJlIGFkZGVkIGluIHRoZSBlbmQuCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgY2hpbGQgd2FzIGFkZGVkCiAgICAgKi8KICAgIGluc2VydENoaWxkKGVudGl0eTogRW50aXR5LCBpbmRleD86IG51bWJlcik6IGJvb2xlYW47CiAgICAvKioKICAgICAqIFJlbW92ZXMgZW50aXR5IGZyb20gY2hpbGRyZW4KICAgICAqCiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgLSBUaGUgZW50aXR5CiAgICAgKi8KICAgIHJlbW92ZUNoaWxkKGVudGl0eTogRW50aXR5KTogdm9pZDsKICAgIC8qKgogICAgICogRGVsZXRlcyBlbnRpdHkgKGFuZCBpdHMgY2hpbGRyZW4pCiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuaGlzdG9yeSAtIFdoZXRoZXIgdG8gcmVjb3JkIGEgaGlzdG9yeSBhY3Rpb24uIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gQSBwcm9taXNlCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogZWRpdG9yLmVudGl0aWVzLnJvb3QuZmluZEJ5TmFtZSgnZG9vcicpLmRlbGV0ZSgpOwogICAgICogYGBgCiAgICAgKgogICAgICovCiAgICBkZWxldGUob3B0aW9ucz86IHsKICAgICAgICBoaXN0b3J5OiBib29sZWFuOwogICAgfSk6IFByb21pc2U8dm9pZD47CiAgICAvKioKICAgICAqIFJlcGFyZW50cyBlbnRpdHkgdW5kZXIgbmV3IHBhcmVudAogICAgICoKICAgICAqIEBwYXJhbSB7RW50aXR5fSBwYXJlbnQgLSBUaGUgbmV3IHBhcmVudAogICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIGRlc2lyZWQgaW5kZXguIElmIHVuZGVmaW5lZCB0aGUgZW50aXR5IHdpbGwgYmUgYWRkZWQgYXQgdGhlIGVuZCBvZiB0aGUgcGFyZW50J3MgY2hpbGRyZW4uCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5wcmVzZXJ2ZVRyYW5zZm9ybSAtIFdoZXRoZXIgdG8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIHRyYW5zZm9ybSBhZnRlciByZXBhcmVudGluZwogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IHJlZEhvdXNlID0gZWRpdG9yLmVudGl0aWVzLnJvb3QuZmluZEJ5TmFtZSgncmVkIGhvdXNlJyk7CiAgICAgKiBjb25zdCBncmVlbkhvdXNlID0gZWRpdG9yLmVudGl0aWVzLnJvb3QuZmluZEJ5TmFtZSgnZ3JlZW4gaG91c2UnKTsKICAgICAqIGNvbnN0IGRvb3IgPSByZWRIb3VzZS5maW5kQnlOYW1lKCdkb29yJyk7CiAgICAgKiBkb29yLnJlcGFyZW50KGdyZWVuSG91c2UpOwogICAgICogYGBgCiAgICAgKi8KICAgIHJlcGFyZW50KHBhcmVudDogRW50aXR5LCBpbmRleD86IG51bWJlciwgb3B0aW9ucz86IHsKICAgICAgICBoaXN0b3J5OiBib29sZWFuOwogICAgICAgIHByZXNlcnZlVHJhbnNmb3JtOiBib29sZWFuOwogICAgfSk6IHZvaWQ7CiAgICAvKioKICAgICAqIER1cGxpY2F0ZXMgZW50aXR5IHVuZGVyIHRoZSBzYW1lIHBhcmVudAogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmhpc3RvcnldIC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VsZWN0XSAtIFdoZXRoZXIgdG8gc2VsZWN0IHRoZSBuZXcgZW50aXR5LiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucmVuYW1lXSAtIFdoZXRoZXIgdG8gcmVuYW1lIHRoZSBkdXBsaWNhdGVkIGVudGl0eS4gRGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxFbnRpdHk+fSBUaGUgbmV3IGVudGl0eQogICAgICovCiAgICBkdXBsaWNhdGUob3B0aW9ucz86IHsKICAgICAgICBoaXN0b3J5PzogYm9vbGVhbjsKICAgICAgICBzZWxlY3Q/OiBib29sZWFuOwogICAgICAgIHJlbmFtZT86IGJvb2xlYW47CiAgICB9KTogUHJvbWlzZTxFbnRpdHk+OwogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBsYXRlc3QgdmVyc2lvbiBvZiB0aGUgRW50aXR5IGZyb20gdGhlIEVudGl0aWVzIEFQSS4KICAgICAqCiAgICAgKiBAcmV0dXJucyB7RW50aXR5fSBUaGUgZW50aXR5CiAgICAgKi8KICAgIGxhdGVzdCgpOiBFbnRpdHk7CiAgICAvKioKICAgICAqIEFkZHMgYSBzY3JpcHQgdG8gdGhlIHNjcmlwdCBjb21wb25lbnQgb2YgdGhpcyBlbnRpdHkuCiAgICAgKiBJZiBhIHNjcmlwdCBjb21wb25lbnQgZG9lcyBub3QgZXhpc3QsIHRoaXMgbWV0aG9kIHdpbGwgYWRkIHRoZSBzY3JpcHQKICAgICAqIGNvbXBvbmVudCBhcyB3ZWxsLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHNjcmlwdC4KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMuYXR0cmlidXRlcyAtIFRoZSB2YWx1ZXMgb2YgYXR0cmlidXRlcy4gRWFjaCBrZXkgaXMgdGhlIG5hbWUKICAgICAqIG9mIHRoZSBhdHRyaWJ1dGVzIGFuZCBlYWNoIHZhbHVlIGlzIHRoZSB2YWx1ZSBmb3IgdGhhdCBhdHRyaWJ1dGUuIExlYXZlIHVuZGVmaW5lZCB0bwogICAgICogbGV0IHRoZSBFZGl0b3Igc2V0IGRlZmF1bHQgdmFsdWVzIGRlcGVuZGluZyBvbiB0aGUgYXR0cmlidXRlIHR5cGVzLgogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLmhpc3RvcnkgLSBXaGV0aGVyIHRvIGFkZCBhIGhpc3RvcnkgYWN0aW9uLiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuaW5kZXggLSBUaGUgZGVzaXJlZCBpbmRleCBpbiB0aGUgZW50aXR5J3Mgc2NyaXB0cyBvcmRlciB0byBhZGQgdGhpcyBzY3JpcHQuCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTw+fSBBIHByb21pc2UKICAgICAqLwogICAgYWRkU2NyaXB0KHNjcmlwdE5hbWU6IHN0cmluZywgb3B0aW9ucz86IHsKICAgICAgICBhdHRyaWJ1dGVzOiBvYmplY3Q7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgICAgICBpbmRleDogbnVtYmVyOwogICAgfSk6IFByb21pc2U8YW55PjsKICAgIC8qKgogICAgICogUmVtb3ZlcyBhIHNjcmlwdCBmcm9tIHRoZSBlbnRpdHkncyBzY3JpcHQgY29tcG9uZW50LgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHNjcmlwdC4KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLmhpc3RvcnkgLSBXaGV0aGVyIHRvIHJlY29yZCBhIGhpc3RvcnkgYWN0aW9uLiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICByZW1vdmVTY3JpcHQoc2NyaXB0TmFtZTogc3RyaW5nLCBvcHRpb25zPzogewogICAgICAgIGhpc3Rvcnk6IGJvb2xlYW47CiAgICB9KTogdm9pZDsKICAgIC8qKgogICAgICogQHR5cGUge0VudGl0eX0KICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgcGFyZW50IGVudGl0eQogICAgICovCiAgICBnZXQgcGFyZW50KCk6IEVudGl0eTsKICAgIC8qKgogICAgICogQHR5cGUge0VudGl0eVtdfQogICAgICogQGRlc2NyaXB0aW9uIFRoZSBjaGlsZHJlbiBlbnRpdGllcy4gV2FybmluZzogdGhpcyBjcmVhdGVzIGEgbmV3IGFycmF5IGV2ZXJ5IHRpbWUgaXQncyBjYWxsZWQuCiAgICAgKi8KICAgIGdldCBjaGlsZHJlbigpOiBFbnRpdHlbXTsKICAgIC8qKgogICAgICogQHR5cGUge09ic2VydmVySGlzdG9yeX0KICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgaGlzdG9yeSBvYmplY3QgZm9yIHRoaXMgZW50aXR5CiAgICAgKi8KICAgIGdldCBoaXN0b3J5KCk6IE9ic2VydmVySGlzdG9yeTsKICAgIC8qKgogICAgICogQHR5cGUge3BjLkVudGl0eX0KICAgICAqIEBkZXNjcmlwdGlvbiBUaGUgZW50aXR5IGluIHRoZSAzRCB2aWV3cG9ydCBvZiB0aGUgRWRpdG9yCiAgICAgKi8KICAgIGdldCB2aWV3cG9ydEVudGl0eSgpOiBwYy5FbnRpdHk7Cn0KCi8qKgogKiBEYXRhIHRvIGNyZWF0ZSBuZXcgRW50aXR5CiAqLwp0eXBlIENyZWF0ZUVudGl0eUFyZ3VtZW50cyA9IHsKICAgIC8qKgogICAgICogLSBUaGUgZW50aXR5IG5hbWUKICAgICAqLwogICAgbmFtZTogc3RyaW5nOwogICAgLyoqCiAgICAgKiAtIENvbXBvbmVudCBkYXRhLiBTZWUgW2hlcmVdKEVudGl0eVByb3BlcnRpZXMubWQpIGZvciBkZXRhaWxzIG9uIGNvbXBvbmVudCBkYXRhLgogICAgICovCiAgICBjb21wb25lbnRzOiBvYmplY3Q7CiAgICAvKioKICAgICAqIC0gVGhlIHBhcmVudCBFbnRpdHkgb3IgaXRzIHJlc291cmNlX2lkLiBJZiB1bmRlZmluZWQgdGhlbiB0aGUgcm9vdCBFbnRpdHkgd2lsbCBiZSB1c2VkIGFzIHRoZSBwYXJlbnQuCiAgICAgKi8KICAgIHBhcmVudDogRW50aXR5IHwgc3RyaW5nOwogICAgLyoqCiAgICAgKiAtIERhdGEgZm9yIGNoaWxkIGVudGl0aWVzLgogICAgICovCiAgICBjaGlsZHJlbjogQ3JlYXRlRW50aXR5QXJndW1lbnRzW107CiAgICAvKioKICAgICAqIC0gVGFncyBmb3IgdGhlIEVudGl0eS4KICAgICAqLwogICAgdGFnczogc3RyaW5nW107CiAgICAvKioKICAgICAqIC0gV2hldGhlciB0aGUgRW50aXR5IHNob3VsZCBiZSBlbmFibGVkLgogICAgICovCiAgICBlbmFibGVkOiBib29sZWFuOwogICAgLyoqCiAgICAgKiAtIFRoZSByZXNvdXJjZV9pZCBvZiB0aGUgRW50aXR5LiBMZWF2ZSB1bmRlZmluZWQgdG8gZ2VuZXJhdGUgYSBuZXcgb25lLgogICAgICovCiAgICByZXNvdXJjZV9pZDogc3RyaW5nOwogICAgLyoqCiAgICAgKiAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgRW50aXR5IGluIGxvY2FsIHNwYWNlLgogICAgICovCiAgICBwb3NpdGlvbjogbnVtYmVyW107CiAgICAvKioKICAgICAqIC0gVGhlIHJvdGF0aW9uIG9mIHRoZSBFbnRpdHkgaW4gbG9jYWwgc3BhY2UgKGV1bGVyIGFuZ2xlcyBpbiBkZWdyZWVzKS4KICAgICAqLwogICAgcm90YXRpb246IG51bWJlcltdOwogICAgLyoqCiAgICAgKiAtIFRoZSBzY2FsZSBvZiB0aGUgRW50aXR5IGluIGxvY2FsIHNwYWNlLgogICAgICovCiAgICBzY2FsZTogbnVtYmVyW107Cn07Ci8qKgogKiBEYXRhIHRvIHJlcGFyZW50IGFuIGVudGl0eSB1bmRlciBhIG5ldyBwYXJlbnQKICovCnR5cGUgUmVwYXJlbnRBcmd1bWVudHMgPSB7CiAgICAvKioKICAgICAqIC0gVGhlIGVudGl0eSB0byByZXBhcmVudAogICAgICovCiAgICBlbnRpdHk6IEVudGl0eTsKICAgIC8qKgogICAgICogLSBUaGUgbmV3IHBhcmVudCBmb3IgdGhlIGVudGl0eQogICAgICovCiAgICBwYXJlbnQ6IEVudGl0eTsKICAgIC8qKgogICAgICogLSBUaGUgY2hpbGQgaW5kZXggb2YgdGhlIGVudGl0eSB1bmRlciB0aGUgbmV3IHBhcmVudAogICAgICovCiAgICBpbmRleDogbnVtYmVyOwp9OwovKioKICogRGF0YSB0byBjcmVhdGUgbmV3IEVudGl0eQogKgogKiBAdHlwZWRlZiB7b2JqZWN0fSBDcmVhdGVFbnRpdHlBcmd1bWVudHMKICogQHByb3BlcnR5IHtzdHJpbmd9IG5hbWUgLSBUaGUgZW50aXR5IG5hbWUKICogQHByb3BlcnR5IHtvYmplY3R9IGNvbXBvbmVudHMgLSBDb21wb25lbnQgZGF0YS4gU2VlIFtoZXJlXShFbnRpdHlQcm9wZXJ0aWVzLm1kKSBmb3IgZGV0YWlscyBvbiBjb21wb25lbnQgZGF0YS4KICogQHByb3BlcnR5IHtFbnRpdHl8c3RyaW5nfSBwYXJlbnQgLSBUaGUgcGFyZW50IEVudGl0eSBvciBpdHMgcmVzb3VyY2VfaWQuIElmIHVuZGVmaW5lZCB0aGVuIHRoZSByb290IEVudGl0eSB3aWxsIGJlIHVzZWQgYXMgdGhlIHBhcmVudC4KICogQHByb3BlcnR5IHtDcmVhdGVFbnRpdHlBcmd1bWVudHNbXX0gY2hpbGRyZW4gLSBEYXRhIGZvciBjaGlsZCBlbnRpdGllcy4KICogQHByb3BlcnR5IHtzdHJpbmdbXX0gdGFncyAtIFRhZ3MgZm9yIHRoZSBFbnRpdHkuCiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gZW5hYmxlZCAtIFdoZXRoZXIgdGhlIEVudGl0eSBzaG91bGQgYmUgZW5hYmxlZC4KICogQHByb3BlcnR5IHtzdHJpbmd9IHJlc291cmNlX2lkIC0gVGhlIHJlc291cmNlX2lkIG9mIHRoZSBFbnRpdHkuIExlYXZlIHVuZGVmaW5lZCB0byBnZW5lcmF0ZSBhIG5ldyBvbmUuCiAqIEBwcm9wZXJ0eSB7bnVtYmVyW119IHBvc2l0aW9uIC0gVGhlIHBvc2l0aW9uIG9mIHRoZSBFbnRpdHkgaW4gbG9jYWwgc3BhY2UuCiAqIEBwcm9wZXJ0eSB7bnVtYmVyW119IHJvdGF0aW9uIC0gVGhlIHJvdGF0aW9uIG9mIHRoZSBFbnRpdHkgaW4gbG9jYWwgc3BhY2UgKGV1bGVyIGFuZ2xlcyBpbiBkZWdyZWVzKS4KICogQHByb3BlcnR5IHtudW1iZXJbXX0gc2NhbGUgLSBUaGUgc2NhbGUgb2YgdGhlIEVudGl0eSBpbiBsb2NhbCBzcGFjZS4KICovCi8qKgogKiBEYXRhIHRvIHJlcGFyZW50IGFuIGVudGl0eSB1bmRlciBhIG5ldyBwYXJlbnQKICoKICogQHR5cGVkZWYge29iamVjdH0gUmVwYXJlbnRBcmd1bWVudHMKICogQHByb3BlcnR5IHtFbnRpdHl9IGVudGl0eSAtIFRoZSBlbnRpdHkgdG8gcmVwYXJlbnQKICogQHByb3BlcnR5IHtFbnRpdHl9IHBhcmVudCAtIFRoZSBuZXcgcGFyZW50IGZvciB0aGUgZW50aXR5CiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBpbmRleCAtIFRoZSBjaGlsZCBpbmRleCBvZiB0aGUgZW50aXR5IHVuZGVyIHRoZSBuZXcgcGFyZW50CiAqLwovKioKICogVGhlIGVudGl0aWVzIGVkaXRvciBBUEkKICovCmRlY2xhcmUgY2xhc3MgRW50aXRpZXMgZXh0ZW5kcyBFdmVudHMgewogICAgX3Jvb3Q6IEVudGl0eTsKICAgIF9lbnRpdGllczogT2JzZXJ2ZXJMaXN0OwogICAgLyoqCiAgICAgKiBHZXRzIGVudGl0eSBieSByZXNvdXJjZSBpZAogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBlbnRpdHkncyByZXNvdXJjZSBpZAogICAgICogQHJldHVybnMge0VudGl0eX0gVGhlIGVudGl0eQogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IGVudGl0eSA9IGVkaXRvci5lbnRpdGllcy5nZXQocmVzb3VyY2VJZCk7CiAgICAgKiBgYGAKICAgICAqLwogICAgZ2V0KGlkOiBzdHJpbmcpOiBFbnRpdHk7CiAgICAvKioKICAgICAqIFJldHVybnMgYXJyYXkgb2YgYWxsIGVudGl0aWVzCiAgICAgKgogICAgICogQHJldHVybnMge0VudGl0eVtdfSBUaGUgZW50aXRpZXMKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiBjb25zdCBlbnRpdGllcyA9IGVkaXRvci5lbnRpdGllcy5saXN0KCk7CiAgICAgKiBjb25zb2xlLmxvZyhlbnRpdGllcy5sZW5ndGgpOwogICAgICogYGBgCiAgICAgKi8KICAgIGxpc3QoKTogRW50aXR5W107CiAgICAvKioKICAgICAqIEFkZHMgZW50aXR5IHRvIGxpc3QKICAgICAqCiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgLSBUaGUgZW50aXR5CiAgICAgKi8KICAgIGFkZChlbnRpdHk6IEVudGl0eSk6IHZvaWQ7CiAgICAvKioKICAgICAqIENhbGxlZCB3aGVuIGFuIGVudGl0eSBpcyBhZGRlZCBmcm9tIHRoZSBzZXJ2ZXIKICAgICAqCiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBlbnRpdHlEYXRhIC0gVGhlIGVudGl0eSBkYXRhCiAgICAgKi8KICAgIHNlcnZlckFkZChlbnRpdHlEYXRhOiBvYmplY3QpOiB2b2lkOwogICAgLyoqCiAgICAgKiBSZW1vdmVzIGVudGl0eSBmcm9tIHRoZSBsaXN0CiAgICAgKgogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IC0gVGhlIGVudGl0eQogICAgICogQHBhcmFtIHtvYmplY3R9IGVudGl0eVJlZmVyZW5jZXMgLSBBIG1hcCBvZiBlbnRpdHkgcmVmZXJlbmNlcyB0byBudWxsaWZ5CiAgICAgKiB3aGVuIHRoaXMgZW50aXR5IGlzIHJlbW92ZWQKICAgICAqLwogICAgcmVtb3ZlKGVudGl0eTogRW50aXR5LCBlbnRpdHlSZWZlcmVuY2VzPzogb2JqZWN0KTogdm9pZDsKICAgIC8qKgogICAgICogQ2FsbGVkIHdoZW4gYW4gZW50aXR5IGlzIHJlbW92ZWQgZnJvbSB0aGUgc2VydmVyCiAgICAgKgogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5IC0gVGhlIGVudGl0eQogICAgICovCiAgICBzZXJ2ZXJSZW1vdmUoZW50aXR5OiBFbnRpdHkpOiB2b2lkOwogICAgLyoqCiAgICAgKiBSZW1vdmVzIGFsbCBlbnRpdGllcyBmcm9tIHRoZSBsaXN0CiAgICAgKgogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKi8KICAgIGNsZWFyKCk6IHZvaWQ7CiAgICAvKioKICAgICAqIENyZWF0ZXMgbmV3IGVudGl0eSBhbmQgYWRkcyBpdCB0byB0aGUgaGllcmFyY2h5CiAgICAgKgogICAgICogQHBhcmFtIHtDcmVhdGVFbnRpdHlBcmd1bWVudHN9IGRhdGEgLSBJbml0aWFsIGRhdGEgZm9yIHRoZSBlbnRpdHkKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuaW5kZXggLSBUaGUgY2hpbGQgaW5kZXggdGhhdCB0aGlzIGVudGl0eSB3aWxsIGhhdmUgdW5kZXIgaXRzIHBhcmVudC4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5zZWxlY3QgLSBXaGV0aGVyIHRvIHNlbGVjdCBuZXcgRW50aXR5LiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqIEByZXR1cm5zIHtFbnRpdHl9IFRoZSBuZXcgZW50aXR5CiAgICAgKgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IHJvb3QgPSBlZGl0b3IuZW50aXRpZXMuY3JlYXRlKHsKICAgICAqICAgICBuYW1lOiAncGFyZW50JywKICAgICAqIH0pOwogICAgICoKICAgICAqIGNvbnN0IGNoaWxkID0gZWRpdG9yLmVudGl0aWVzLmNyZWF0ZSh7CiAgICAgKiAgICAgbmFtZTogJ2NoaWxkJywKICAgICAqICAgICBwYXJlbnQ6IHJvb3QsCiAgICAgKiB9KTsKICAgICAqYGBgCiAgICAgKi8KICAgIGNyZWF0ZShkYXRhPzogQ3JlYXRlRW50aXR5QXJndW1lbnRzLCBvcHRpb25zPzogewogICAgICAgIGluZGV4OiBudW1iZXI7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgICAgICBzZWxlY3Q6IGJvb2xlYW47CiAgICB9KTogRW50aXR5OwogICAgLyoqCiAgICAgKiBEZWxldGUgc3BlY2lmaWVkIGVudGl0aWVzCiAgICAgKgogICAgICogQHBhcmFtIHtFbnRpdHlbXXxFbnRpdHl9IGVudGl0aWVzIC0gVGhlIGVudGl0aWVzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogYXdhaXQgZWRpdG9yLmVudGl0aWVzLmRlbGV0ZShbZW50aXR5MSwgZW50aXR5Ml0pOwogICAgICogYGBgCiAgICAgKi8KICAgIGRlbGV0ZShlbnRpdGllczogRW50aXR5W10gfCBFbnRpdHksIG9wdGlvbnM/OiB7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgIH0pOiBQcm9taXNlPHZvaWQ+OwogICAgLyoqCiAgICAgKiBSZXBhcmVudHMgZW50aXRpZXMgdW5kZXIgbmV3IHBhcmVudC4KICAgICAqCiAgICAgKiBAcGFyYW0ge1JlcGFyZW50QXJndW1lbnRzW119IGRhdGEgLSBUaGUgcmVwYXJlbnRpbmcgZGF0YQogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMucHJlc2VydmVUcmFuc2Zvcm0gLSBXaGV0aGVyIHRvIHByZXNlcnZlIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIGVudGl0aWVzLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgaGlzdG9yeS4gRGVmYXVsdHMgdG8gdHJ1ZQogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IGNoaWxkID0gZWRpdG9yLmVudGl0aWVzLmNyZWF0ZSgpOwogICAgICogY29uc3QgcGFyZW50ID0gZWRpdG9yLmVudGl0aWVzLmNyZWF0ZSgpOwogICAgICogZWRpdG9yLmVudGl0aWVzLnJlcGFyZW50KFt7CiAgICAgKiAgICAgZW50aXR5OiBjaGlsZCwKICAgICAqICAgICBwYXJlbnQ6IHBhcmVudAogICAgICogfV0pCiAgICAgKiBgYGAKICAgICAqLwogICAgcmVwYXJlbnQoZGF0YTogUmVwYXJlbnRBcmd1bWVudHNbXSwgb3B0aW9ucz86IHsKICAgICAgICBwcmVzZXJ2ZVRyYW5zZm9ybTogYm9vbGVhbjsKICAgICAgICBoaXN0b3J5OiBib29sZWFuOwogICAgfSk6IHZvaWQ7CiAgICAvKioKICAgICAqIER1cGxpY2F0ZXMgdGhlIHNwZWNpZmllZCBlbnRpdGllcyB1bmRlciB0aGUgc2FtZSBwYXJlbnQKICAgICAqCiAgICAgKiBAcGFyYW0ge0VudGl0eVtdfSBlbnRpdGllcyAtIFRoZSBlbnRpdGllcwogICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaGlzdG9yeV0gLSBXaGV0aGVyIHRvIHJlY29yZCBhIGhpc3RvcnkgYWN0aW9uLiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zZWxlY3RdIC0gV2hldGhlciB0byBzZWxlY3QgdGhlIG5ldyBlbnRpdGllcy4gRGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJlbmFtZV0gLSBXaGV0aGVyIHRvIHJlbmFtZSB0aGUgZHVwbGljYXRlZCBlbnRpdGllcy4gRGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxFbnRpdHlbXT59IFRoZSBkdXBsaWNhdGVkIGVudGl0aWVzCiAgICAgKiBAZXhhbXBsZQogICAgICogY29uc3QgZHVwbGljYXRlZCA9IGF3YWl0IGVkaXRvci5lbnRpdGllcy5kdXBsaWNhdGUoZW50aXRpZXMpOwogICAgICovCiAgICBkdXBsaWNhdGUoZW50aXRpZXM6IEVudGl0eVtdLCBvcHRpb25zPzogewogICAgICAgIGhpc3Rvcnk/OiBib29sZWFuOwogICAgICAgIHNlbGVjdD86IGJvb2xlYW47CiAgICAgICAgcmVuYW1lPzogYm9vbGVhbjsKICAgIH0pOiBQcm9taXNlPEVudGl0eVtdPjsKICAgIC8qKgogICAgICogQ29weSBzcGVjaWZpZWQgZW50aXRpZXMgdG8gbG9jYWxTdG9yYWdlIGNsaXBib2FyZC4gQ2FuIGJlIHVzZWQKICAgICAqIHRvIHBhc3RlIHRoZXNlIGVudGl0aWVzIGxhdGVyIG9uLgogICAgICoKICAgICAqIEBwYXJhbSB7RW50aXR5W119IGVudGl0aWVzIC0gVGhlIGVudGl0aWVzCiAgICAgKi8KICAgIGNvcHlUb0NsaXBib2FyZChlbnRpdGllczogRW50aXR5W10pOiB2b2lkOwogICAgLyoqCiAgICAgKiBQYXN0ZSBlbnRpdGllcyBjb3BpZWQgaW50byBjbGlwYm9hcmQKICAgICAqIHVuZGVyIHRoZSBzcGVjaWZpZWQgcGFyZW50LgogICAgICoKICAgICAqIEBwYXJhbSB7RW50aXR5fSBwYXJlbnQgLSBUaGUgcGFyZW50CiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEVudGl0eVtdPn0gVGhlIG5ldyBlbnRpdGllcwogICAgICovCiAgICBwYXN0ZUZyb21DbGlwYm9hcmQocGFyZW50OiBFbnRpdHksIG9wdGlvbnM/OiB7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgIH0pOiBQcm9taXNlPEVudGl0eVtdPjsKICAgIC8qKgogICAgICogV2FpdHMgZm9yIHNwZWNpZmllZCBlbnRpdHkgaWRzIHRvIGJlIGFkZGVkIHRvIHRoZSBzY2VuZS4KICAgICAqIE9uY2UgdGhleSBhcmUgdGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aXRoIHRoZSBlbnRpdGllcyBhcyBpdHMgYXJndW1lbnQuCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmdbXX0gZW50aXR5SWRzIC0gVGhlIGlkcyBvZiB0aGUgZW50aXRpZXMgdG8gd2FpdCBmb3IKICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0TXMgLSBOdW1iZXIgb2YgbXMgdG8gd2FpdCBiZWZvcmUgc3RvcHBpbmcgdG8gd2FpdAogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIGFsbCBlbnRpdGllcyBoYXZlIGJlZW4gYWRkZWQuCiAgICAgKiBUaGUgc2lnbmF0dXJlIGlzIChFbnRpdHlbXSkgPT4gdm9pZC4KICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBhIGNhbmNlbCBmdW5jdGlvbiB3aGljaCBjYW4gYmUgY2FsbGVkIHRvIGNhbmNlbCBjYWxsaW5nIHRoZQogICAgICogY2FsbGJhY2sgd2hlbiB0aGUgZW50aXRpZXMgYXJlIGFkZGVkLgogICAgICovCiAgICB3YWl0VG9FeGlzdChlbnRpdHlJZHM6IHN0cmluZ1tdLCB0aW1lb3V0TXM6IG51bWJlciwgY2FsbGJhY2s6IEZ1bmN0aW9uKTogRnVuY3Rpb247CiAgICAvKioKICAgICAqIExpa2Uge0BsaW5rIEVudGl0eS5hZGRTY3JpcHR9IGJ1dCB3b3JrcyBvbiBtdWx0aXBsZSBlbnRpdGllcyB1c2luZwogICAgICogYSBzaW5nbGUgaGlzdG9yeSBhY3Rpb24uCiAgICAgKgogICAgICogQHBhcmFtIHtFbnRpdHlbXX0gZW50aXRpZXMgLSBUaGUgZW50aXRpZXMuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2NyaXB0TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBzY3JpcHQuCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLmF0dHJpYnV0ZXMgLSBUaGUgdmFsdWVzIG9mIGF0dHJpYnV0ZXMuIEVhY2gga2V5IGlzIHRoZSBuYW1lCiAgICAgKiBvZiB0aGUgYXR0cmlidXRlcyBhbmQgZWFjaCB2YWx1ZSBpcyB0aGUgdmFsdWUgZm9yIHRoYXQgYXR0cmlidXRlLiBMZWF2ZSB1bmRlZmluZWQgdG8KICAgICAqIGxldCB0aGUgRWRpdG9yIHNldCBkZWZhdWx0IHZhbHVlcyBkZXBlbmRpbmcgb24gdGhlIGF0dHJpYnV0ZSB0eXBlcy4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byBhZGQgYSBoaXN0b3J5IGFjdGlvbi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLmluZGV4IC0gVGhlIGRlc2lyZWQgaW5kZXggaW4gdGhlIGVudGl0eSdzIHNjcmlwdHMgb3JkZXIgdG8gYWRkIHRoaXMgc2NyaXB0LgogICAgICogQHJldHVybnMge1Byb21pc2U8Pn0gQSBwcm9taXNlCiAgICAgKi8KICAgIGFkZFNjcmlwdChlbnRpdGllczogRW50aXR5W10sIHNjcmlwdE5hbWU6IHN0cmluZywgb3B0aW9ucz86IHsKICAgICAgICBhdHRyaWJ1dGVzOiBvYmplY3Q7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgICAgICBpbmRleDogbnVtYmVyOwogICAgfSk6IFByb21pc2U8YW55PjsKICAgIC8qKgogICAgICogTGlrZSB7QGxpbmsgRW50aXR5LnJlbW92ZVNjcmlwdH0gYnV0IHdvcmtzIG9uIG11bHRpcGxlIGVudGl0aWVzIHVzaW5nCiAgICAgKiBhIHNpbmdsZSBoaXN0b3J5IGFjdGlvbi4KICAgICAqCiAgICAgKiBAcGFyYW0ge0VudGl0eVtdfSBlbnRpdGllcyAtIFRoZSBlbnRpdGllcy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHNjcmlwdC4KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLmhpc3RvcnkgLSBXaGV0aGVyIHRvIHJlY29yZCBhIGhpc3RvcnkgYWN0aW9uLiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICByZW1vdmVTY3JpcHQoZW50aXRpZXM6IEVudGl0eVtdLCBzY3JpcHROYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiB7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgIH0pOiB2b2lkOwogICAgLyoqCiAgICAgKiBAdHlwZSB7RW50aXR5fQogICAgICogR2V0cyB0aGUgcm9vdCBFbnRpdHkKICAgICAqLwogICAgZ2V0IHJvb3QoKTogRW50aXR5Owp9CgovKioKICogUmVwcmVzZW50cyBhbiBBc3NldC4gRm9yIGEgbGlzdCBvZiBBc3NldCBwcm9wZXJ0aWVzIHNlZSBbaGVyZV0oQXNzZXRQcm9wZXJ0aWVzLm1kKS4KICovCmRlY2xhcmUgY2xhc3MgQXNzZXQgZXh0ZW5kcyBFdmVudHMgewogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBmaWxlIFVSTCBmb3IgYW4gYXNzZXQgZmlsZQogICAgICoKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIFRoZSBhc3NldCBpZAogICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVuYW1lIC0gVGhlIGRlc2lyZWQgZmlsZW5hbWUKICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmaWxlIFVSTAogICAgICovCiAgICBzdGF0aWMgZ2V0RmlsZVVybChpZDogbnVtYmVyLCBmaWxlbmFtZTogc3RyaW5nKTogc3RyaW5nOwogICAgLyoqIEB0eXBlZGVmIHtpbXBvcnQoIi4vZW50aXR5IikuRW50aXR5fSBFbnRpdHkgKi8KICAgIC8qKgogICAgICogQ29uc3RydWN0b3IKICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIFRoZSBhc3NldCBkYXRhCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGRhdGE/OiBvYmplY3QpOwogICAgX29ic2VydmVyOiBPYnNlcnZlcjsKICAgIF9zdXNwZW5kT25TZXQ6IGJvb2xlYW47CiAgICBfaGlzdG9yeToge307CiAgICBfaW5pdGlhbGl6ZUhpc3RvcnkoKTogdm9pZDsKICAgIF9yZXNldFRodW1ibmFpbFVybHMoKTogdm9pZDsKICAgIF9vblNldChwYXRoOiBhbnksIHZhbHVlOiBhbnkpOiB2b2lkOwogICAgLyoqCiAgICAgKiBDaGVja3MgaWYgcGF0aCBleGlzdHMuIEZvciBhIGxpc3Qgb2YgQXNzZXQgcHJvcGVydGllcyBzZWUgW2hlcmVdKEFzc2V0UHJvcGVydGllcy5tZCkuCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aAogICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgcGF0aCBleGlzdHMKICAgICAqLwogICAgaGFzKHBhdGg6IHN0cmluZyk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIEdldHMgdmFsdWUgYXQgcGF0aC4gRm9yIGEgbGlzdCBvZiBBc3NldCBwcm9wZXJ0aWVzIHNlZSBbaGVyZV0oQXNzZXRQcm9wZXJ0aWVzLm1kKS4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoCiAgICAgKiBAcmV0dXJucyB7YW55fSBUaGUgdmFsdWUKICAgICAqLwogICAgZ2V0KHBhdGg6IHN0cmluZyk6IGFueTsKICAgIC8qKgogICAgICogU2V0cyB2YWx1ZSBhdCBwYXRoLiBGb3IgYSBsaXN0IG9mIEFzc2V0IHByb3BlcnRpZXMgc2VlIFtoZXJlXShBc3NldFByb3BlcnRpZXMubWQpLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGgKICAgICAqIEBwYXJhbSB7YW55fSB2YWx1ZSAtIFRoZSB2YWx1ZQogICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHZhbHVlIHdhcyBzZXQKICAgICAqLwogICAgc2V0KHBhdGg6IHN0cmluZywgdmFsdWU6IGFueSk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIFVuc2V0cyB2YWx1ZSBhdCBwYXRoLiBGb3IgYSBsaXN0IG9mIEFzc2V0IHByb3BlcnRpZXMgc2VlIFtoZXJlXShBc3NldFByb3BlcnRpZXMubWQpLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGgKICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSB2YWx1ZSB3YXMgdW5zZXQKICAgICAqLwogICAgdW5zZXQocGF0aDogc3RyaW5nKTogYm9vbGVhbjsKICAgIC8qKgogICAgICogSW5zZXJ0cyB2YWx1ZSBpbiBhcnJheSBhdCBwYXRoLCBhdCBzcGVjaWZpZWQgaW5kZXguIEZvciBhIGxpc3Qgb2YgQXNzZXQgcHJvcGVydGllcyBzZWUgW2hlcmVdKEFzc2V0UHJvcGVydGllcy5tZCkuCiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aAogICAgICogQHBhcmFtIHthbnl9IHZhbHVlIC0gVGhlIHZhbHVlCiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBUaGUgaW5kZXggKGlmIHVuZGVmaW5lZCB0aGUgdmFsdWUgd2lsbCBiZSBpbnNlcnRlZCBpbiB0aGUgZW5kKQogICAgICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHZhbHVlIHdhcyBpbnNlcnRlZAogICAgICovCiAgICBpbnNlcnQocGF0aDogc3RyaW5nLCB2YWx1ZTogYW55LCBpbmRleDogbnVtYmVyKTogYm9vbGVhbjsKICAgIC8qKgogICAgICogUmVtb3ZlIHZhbHVlIGZyb20gYXJyYXkgYXQgcGF0aC4gRm9yIGEgbGlzdCBvZiBBc3NldCBwcm9wZXJ0aWVzIHNlZSBbaGVyZV0oQXNzZXRQcm9wZXJ0aWVzLm1kKS4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoCiAgICAgKiBAcGFyYW0ge2FueX0gdmFsdWUgLSBUaGUgdmFsdWUKICAgICAqIEByZXR1cm5zIHtib29sZWFufSBXaGV0aGVyIHRoZSB2YWx1ZSB3YXMgcmVtb3ZlZAogICAgICovCiAgICByZW1vdmVWYWx1ZShwYXRoOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBib29sZWFuOwogICAgLyoqCiAgICAgKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50YXRpb24gb2YgZW50aXR5IGRhdGEKICAgICAqCiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSAtIFRoZSBkYXRhCiAgICAgKi8KICAgIGpzb24oKTogb2JqZWN0OwogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBsYXRlc3QgdmVyc2lvbiBvZiB0aGUgQXNzZXQgZnJvbSB0aGUgQXNzZXRzIEFQSS4KICAgICAqCiAgICAgKiBAcmV0dXJucyB7QXNzZXR9IFRoZSBhc3NldAogICAgICovCiAgICBsYXRlc3QoKTogQXNzZXQ7CiAgICAvKioKICAgICAqIExvYWRzIGFzc2V0IGZyb20gdGhlIHNlcnZlciB3aXRob3V0IHN1YnNjcmliaW5nIHRvIHJlYWx0aW1lIGNoYW5nZXMuCiAgICAgKi8KICAgIGxvYWQoKTogUHJvbWlzZTx2b2lkPjsKICAgIC8qKgogICAgICogTG9hZHMgdGhlIGFzc2V0J3MgZGF0YSBmcm9tIHNoYXJlZGIgYW5kIHN1YnNjcmliZXMgdG8gY2hhbmdlcwogICAgICovCiAgICBsb2FkQW5kU3Vic2NyaWJlKCk6IFByb21pc2U8dm9pZD47CiAgICAvKioKICAgICAqIERlbGV0ZXMgdGhpcyBhc3NldAogICAgICovCiAgICBkZWxldGUoKTogUHJvbWlzZTx2b2lkPjsKICAgIC8qKgogICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGlzIHRlbXBsYXRlIGFzc2V0LiBBc3N1bWVzIHRoaXMKICAgICAqIGFzc2V0IGlzIGEgdGVtcGxhdGUgYXNzZXQuCiAgICAgKgogICAgICogQHBhcmFtIHtFbnRpdHl9IHBhcmVudCAtIFRoZSBwYXJlbnQgZW50aXR5CiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLmluZGV4IC0gVGhlIGRlc2lyZWQgaW5kZXggdW5kZXIgdGhlIHBhcmVudCB0byBpbnN0YW50aWF0ZSB0aGUgdGVtcGxhdGUuCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuaGlzdG9yeSAtIFdoZXRoZXIgdG8gcmVjb3JkIGEgaGlzdG9yeSBhY3Rpb24uCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuc2VsZWN0IC0gV2hldGhlciB0byBzZWxlY3QgdGhlIG5ldyBlbnRpdHkuCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5leHRyYURhdGEgLSBFeHRyYSBkYXRhIHBhc3NlZCB0byB0aGUgYmFja2VuZC4gVXNlZCBieSB0aGUgRWRpdG9yIG9uIHNwZWNpZmljIGNhc2VzLgogICAgICogQHJldHVybnMge1Byb21pc2U8RW50aXR5Pn0gVGhlIG5ldyBlbnRpdHkuCiAgICAgKi8KICAgIGluc3RhbnRpYXRlVGVtcGxhdGUocGFyZW50OiBFbnRpdHksIG9wdGlvbnM6IHsKICAgICAgICBpbmRleDogbnVtYmVyOwogICAgICAgIGhpc3Rvcnk6IGJvb2xlYW47CiAgICAgICAgc2VsZWN0OiBib29sZWFuOwogICAgICAgIGV4dHJhRGF0YTogb2JqZWN0OwogICAgfSk6IFByb21pc2U8RW50aXR5PjsKICAgIC8qKgogICAgICogUmVwbGFjZXMgYW55IHJlZmVyZW5jZXMgdG8gdGhpcyBhc3NldCB3aXRoCiAgICAgKiByZWZlcmVuY2VzIHRvIHRoZSBuZXcgYXNzZXQgc3BlY2lmaWVkLgogICAgICoKICAgICAqIEBwYXJhbSB7QXNzZXR9IGFzc2V0IC0gVGhlIG5ldyBhc3NldC4KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucy4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4KICAgICAqLwogICAgcmVwbGFjZShhc3NldDogQXNzZXQsIG9wdGlvbnM/OiB7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgIH0pOiB2b2lkOwogICAgLyoqCiAgICAgKiBHZXRzIG9ic2VydmVyIGhpc3RvcnkgZm9yIHRoaXMgYXNzZXQKICAgICAqCiAgICAgKiBAdHlwZSB7T2JzZXJ2ZXJIaXN0b3J5fQogICAgICovCiAgICBnZXQgaGlzdG9yeSgpOiBPYnNlcnZlckhpc3Rvcnk7Cn0KCi8qKgogKiBBcmd1bWVudHMgcGFzc2VkIHdoZW4gdXBsb2FkaW5nIGFuIGFzc2V0IGZpbGUuCiAqLwp0eXBlIEFzc2V0VXBsb2FkQXJndW1lbnRzID0gewogICAgLyoqCiAgICAgKiAtIFRoZSBwYXJlbnQgZm9sZGVyIGFzc2V0IHdoZXJlIHRoZSBhc3NldCBzaG91bGQgYmUgcGxhY2VkLgogICAgICovCiAgICBmb2xkZXI6IEFzc2V0OwogICAgLyoqCiAgICAgKiAtIFRoZSBmaWxlbmFtZSBvZiB0aGUgdXBsb2FkZWQgZmlsZS4KICAgICAqLwogICAgZmlsZW5hbWU6IHN0cmluZzsKICAgIC8qKgogICAgICogLSBUaGUgZmlsZSBiZWluZyB1cGxvYWRlZC4KICAgICAqLwogICAgZmlsZTogRmlsZTsKICAgIC8qKgogICAgICogLSBUaGUgdHlwZSBvZiB0aGUgYXNzZXQgd2UgYXJlIHVwbG9hZGluZy4gU2VlIFtoZXJlXShBc3NldFByb3BlcnRpZXMubWQpIGZvciBhdmFpbGFibGUgYXNzZXQgdHlwZXMuCiAgICAgKi8KICAgIHR5cGU6IHN0cmluZzsKICAgIC8qKgogICAgICogLSBUaGUgbmFtZSBvZiB0aGUgYXNzZXQuCiAgICAgKi8KICAgIG5hbWU6IHN0cmluZzsKICAgIC8qKgogICAgICogLSBUaGUgdGFncyBvZiB0aGUgYXNzZXQuCiAgICAgKi8KICAgIHRhZ3M6IHN0cmluZ1tdOwogICAgLyoqCiAgICAgKiAtIFRoZSBpZCBvZiB0aGUgc291cmNlIGFzc2V0LgogICAgICovCiAgICBzb3VyY2VBc3NldElkOiBudW1iZXI7CiAgICAvKioKICAgICAqIC0gVGhlIGFzc2V0IGRhdGEuIFRoaXMgZGVwZW5kcyBvbiB0aGUgYXNzZXQgdHlwZS4gU2VlIFtoZXJlXShBc3NldFByb3BlcnRpZXMubWQpIGZvciBhc3NldCBkYXRhIGRlcGVuZGluZyBvbiB0aGUgdHlwZS4KICAgICAqLwogICAgZGF0YTogb2JqZWN0OwogICAgLyoqCiAgICAgKiAtIFdoZXRoZXIgdG8gcHJlbG9hZCB0aGUgYXNzZXQuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHByZWxvYWQ6IGJvb2xlYW47CiAgICAvKioKICAgICAqIC0gSWYgYW4gYXNzZXQgaWQgaXMgc3BlY2lmaWVkIHRoZW4gdGhpcyBhc3NldCB3aWxsIGJlIHVwZGF0ZWQgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBhc3NldC4KICAgICAqLwogICAgaWQ6IG51bWJlcjsKfTsKLyoqCiAqIEltcG9ydCBzZXR0aW5ncyB1c2VkIHdoZW4gdXBsb2FkaW5nIGEgdGV4dHVyZSBhc3NldC4KICovCnR5cGUgVGV4dHVyZUltcG9ydFNldHRpbmdzID0gewogICAgLyoqCiAgICAgKiAtIFdoZXRoZXIgdG8gcmVzaXplIHRoZSB0ZXh0dXJlIHRvIHBvd2VyIG9mIDIuCiAgICAgKi8KICAgIHBvdzI6IGJvb2xlYW47CiAgICAvKioKICAgICAqIC0gV2hldGhlciB0byBzZWFyY2ggZm9yIHRhcmdldCBhc3NldHMgdG8gdXBkYXRlCiAgICAgKiB0aHJvdWdob3V0IHRoZSB3aG9sZSBwcm9qZWN0IGluc3RlYWQgb2YganVzdCB0aGUgc2FtZSBmb2xkZXIuCiAgICAgKi8KICAgIHNlYXJjaFJlbGF0ZWRBc3NldHM6IGJvb2xlYW47Cn07Ci8qKgogKiBJbXBvcnQgc2V0dGluZ3MgdXNlZCB3aGVuIHVwbG9hZGluZyBhIHNjZW5lIChmYnggZXRjLikuCiAqLwp0eXBlIFNjZW5lSW1wb3J0U2V0dGluZ3MgPSB7CiAgICAvKioKICAgICAqIC0gV2hldGhlciB0byBzZWFyY2ggZm9yIHRhcmdldCBhc3NldHMgdG8gdXBkYXRlCiAgICAgKiB0aHJvdWdob3V0IHRoZSB3aG9sZSBwcm9qZWN0IGluc3RlYWQgb2YganVzdCB0aGUgc2FtZSBmb2xkZXIuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIHNlYXJjaFJlbGF0ZWRBc3NldHM6IGJvb2xlYW47CiAgICAvKioKICAgICAqIC0gV2hldGhlciB0byBvdmVyd3JpdGUgZXhpc3RpbmcgbW9kZWwgb3IgY3JlYXRlIGEgbmV3IG9uZS4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAgb3ZlcndyaXRlTW9kZWw6IGJvb2xlYW47CiAgICAvKioKICAgICAqIC0gV2hldGhlciB0byBvdmVyd3JpdGUgZXhpc3RpbmcgYW5pbWF0aW9ucyBvciBjcmVhdGUgbmV3IG9uZXMuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIG92ZXJ3cml0ZUFuaW1hdGlvbjogYm9vbGVhbjsKICAgIC8qKgogICAgICogLSBXaGV0aGVyIHRvIG92ZXJ3cml0ZSBleGlzdGluZyBtYXRlcmlhbHMgb3IgY3JlYXRlIG5ldyBvbmVzLiBEZWZhdWx0cyB0byB0cnVlLgogICAgICovCiAgICBvdmVyd3JpdGVNYXRlcmlhbDogYm9vbGVhbjsKICAgIC8qKgogICAgICogLSBXaGV0aGVyIHRvIG92ZXJ3cml0ZSBleGlzdGluZyB0ZXh0dXJlcyBvciBjcmVhdGUgbmV3IG9uZXMuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKi8KICAgIG92ZXJ3cml0ZVRleHR1cmU6IGJvb2xlYW47CiAgICAvKioKICAgICAqIC0gV2hldGhlciB0byByZXNpemUgZW1iZWRkZWQgdGV4dHVyZXMgdG8gcG93ZXIgb2YgMi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAgcG93MjogYm9vbGVhbjsKICAgIC8qKgogICAgICogLSBXaGV0aGVyIHRvIGNvbnZlcnQgbW9kZWxzIHRvIEdMQi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqLwogICAgdXNlR2xiOiBib29sZWFuOwogICAgLyoqCiAgICAgKiAtIFRoZSBkZXNpcmVkIGFuaW1hdGlvbiBzYW1wbGUgcmF0ZS4gRGVmYXVsdHMgdG8gMTAuCiAgICAgKi8KICAgIGFuaW1TYW1wbGVSYXRlOiBib29sZWFuOwogICAgLyoqCiAgICAgKiAtIFRoZSBhbmltYXRpb24gY3VydmUgdG9sZXJhbmNlLiBEZWZhdWx0cyB0byAwLgogICAgICovCiAgICBhbmltQ3VydmVUb2xlcmFuY2U6IGJvb2xlYW47CiAgICAvKioKICAgICAqIC0gV2hldGhlciB0byBlbmFibGUgY3ViaWMgY3VydmVzLiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqLwogICAgYW5pbUVuYWJsZUN1YmljOiBib29sZWFuOwogICAgLyoqCiAgICAgKiAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmYnggZmlsZW5hbWUgZm9yIGFuaW1hdGlvbiBuYW1lcy4gRGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKi8KICAgIGFuaW1Vc2VGYnhGaWxlbmFtZTogYm9vbGVhbjsKfTsKLyoqCiAqIEFyZ3VtZW50cyBwYXNzZWQgd2hlbiB1cGxvYWRpbmcgYW4gYXNzZXQgZmlsZS4KICoKICogQHR5cGVkZWYge29iamVjdH0gQXNzZXRVcGxvYWRBcmd1bWVudHMKICogQHByb3BlcnR5IHtBc3NldH0gZm9sZGVyIC0gVGhlIHBhcmVudCBmb2xkZXIgYXNzZXQgd2hlcmUgdGhlIGFzc2V0IHNob3VsZCBiZSBwbGFjZWQuCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmaWxlbmFtZSAtIFRoZSBmaWxlbmFtZSBvZiB0aGUgdXBsb2FkZWQgZmlsZS4KICogQHByb3BlcnR5IHtGaWxlfSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgdXBsb2FkZWQuCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIC0gVGhlIHR5cGUgb2YgdGhlIGFzc2V0IHdlIGFyZSB1cGxvYWRpbmcuIFNlZSBbaGVyZV0oQXNzZXRQcm9wZXJ0aWVzLm1kKSBmb3IgYXZhaWxhYmxlIGFzc2V0IHR5cGVzLgogKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBhc3NldC4KICogQHByb3BlcnR5IHtzdHJpbmdbXX0gdGFncyAtIFRoZSB0YWdzIG9mIHRoZSBhc3NldC4KICogQHByb3BlcnR5IHtudW1iZXJ9IHNvdXJjZUFzc2V0SWQgLSBUaGUgaWQgb2YgdGhlIHNvdXJjZSBhc3NldC4KICogQHByb3BlcnR5IHtvYmplY3R9IGRhdGEgLSBUaGUgYXNzZXQgZGF0YS4gVGhpcyBkZXBlbmRzIG9uIHRoZSBhc3NldCB0eXBlLiBTZWUgW2hlcmVdKEFzc2V0UHJvcGVydGllcy5tZCkgZm9yIGFzc2V0IGRhdGEgZGVwZW5kaW5nIG9uIHRoZSB0eXBlLgogKiBAcHJvcGVydHkge2Jvb2xlYW59IHByZWxvYWQgLSBXaGV0aGVyIHRvIHByZWxvYWQgdGhlIGFzc2V0LiBEZWZhdWx0cyB0byB0cnVlLgogKiBAcHJvcGVydHkge251bWJlcn0gaWQgLSBJZiBhbiBhc3NldCBpZCBpcyBzcGVjaWZpZWQgdGhlbiB0aGlzIGFzc2V0IHdpbGwgYmUgdXBkYXRlZCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IGFzc2V0LgogKi8KLyoqCiAqIEltcG9ydCBzZXR0aW5ncyB1c2VkIHdoZW4gdXBsb2FkaW5nIGEgdGV4dHVyZSBhc3NldC4KICoKICogQHR5cGVkZWYge29iamVjdH0gVGV4dHVyZUltcG9ydFNldHRpbmdzCiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcG93MiAtIFdoZXRoZXIgdG8gcmVzaXplIHRoZSB0ZXh0dXJlIHRvIHBvd2VyIG9mIDIuCiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc2VhcmNoUmVsYXRlZEFzc2V0cyAtIFdoZXRoZXIgdG8gc2VhcmNoIGZvciB0YXJnZXQgYXNzZXRzIHRvIHVwZGF0ZQogKiB0aHJvdWdob3V0IHRoZSB3aG9sZSBwcm9qZWN0IGluc3RlYWQgb2YganVzdCB0aGUgc2FtZSBmb2xkZXIuCiAqLwovKioKICogSW1wb3J0IHNldHRpbmdzIHVzZWQgd2hlbiB1cGxvYWRpbmcgYSBzY2VuZSAoZmJ4IGV0Yy4pLgogKgogKiBAdHlwZWRlZiB7b2JqZWN0fSBTY2VuZUltcG9ydFNldHRpbmdzCiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gc2VhcmNoUmVsYXRlZEFzc2V0cyAtIFdoZXRoZXIgdG8gc2VhcmNoIGZvciB0YXJnZXQgYXNzZXRzIHRvIHVwZGF0ZQogKiB0aHJvdWdob3V0IHRoZSB3aG9sZSBwcm9qZWN0IGluc3RlYWQgb2YganVzdCB0aGUgc2FtZSBmb2xkZXIuIERlZmF1bHRzIHRvIHRydWUuCiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gb3ZlcndyaXRlTW9kZWwgLSBXaGV0aGVyIHRvIG92ZXJ3cml0ZSBleGlzdGluZyBtb2RlbCBvciBjcmVhdGUgYSBuZXcgb25lLiBEZWZhdWx0cyB0byB0cnVlLgogKiBAcHJvcGVydHkge2Jvb2xlYW59IG92ZXJ3cml0ZUFuaW1hdGlvbiAtIFdoZXRoZXIgdG8gb3ZlcndyaXRlIGV4aXN0aW5nIGFuaW1hdGlvbnMgb3IgY3JlYXRlIG5ldyBvbmVzLiBEZWZhdWx0cyB0byB0cnVlLgogKiBAcHJvcGVydHkge2Jvb2xlYW59IG92ZXJ3cml0ZU1hdGVyaWFsIC0gV2hldGhlciB0byBvdmVyd3JpdGUgZXhpc3RpbmcgbWF0ZXJpYWxzIG9yIGNyZWF0ZSBuZXcgb25lcy4gRGVmYXVsdHMgdG8gdHJ1ZS4KICogQHByb3BlcnR5IHtib29sZWFufSBvdmVyd3JpdGVUZXh0dXJlIC0gV2hldGhlciB0byBvdmVyd3JpdGUgZXhpc3RpbmcgdGV4dHVyZXMgb3IgY3JlYXRlIG5ldyBvbmVzLiBEZWZhdWx0cyB0byB0cnVlLgogKiBAcHJvcGVydHkge2Jvb2xlYW59IHBvdzIgLSBXaGV0aGVyIHRvIHJlc2l6ZSBlbWJlZGRlZCB0ZXh0dXJlcyB0byBwb3dlciBvZiAyLiBEZWZhdWx0cyB0byB0cnVlLgogKiBAcHJvcGVydHkge2Jvb2xlYW59IHVzZUdsYiAtIFdoZXRoZXIgdG8gY29udmVydCBtb2RlbHMgdG8gR0xCLiBEZWZhdWx0cyB0byB0cnVlLgogKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1TYW1wbGVSYXRlIC0gVGhlIGRlc2lyZWQgYW5pbWF0aW9uIHNhbXBsZSByYXRlLiBEZWZhdWx0cyB0byAxMC4KICogQHByb3BlcnR5IHtib29sZWFufSBhbmltQ3VydmVUb2xlcmFuY2UgLSBUaGUgYW5pbWF0aW9uIGN1cnZlIHRvbGVyYW5jZS4gRGVmYXVsdHMgdG8gMC4KICogQHByb3BlcnR5IHtib29sZWFufSBhbmltRW5hYmxlQ3ViaWMgLSBXaGV0aGVyIHRvIGVuYWJsZSBjdWJpYyBjdXJ2ZXMuIERlZmF1bHRzIHRvIGZhbHNlLgogKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1Vc2VGYnhGaWxlbmFtZSAtIFdoZXRoZXIgdG8gdXNlIHRoZSBmYnggZmlsZW5hbWUgZm9yIGFuaW1hdGlvbiBuYW1lcy4gRGVmYXVsdHMgdG8gZmFsc2UuCiAqLwovKioKICogVGhlIEFzc2V0cyBFZGl0b3IgQVBJCiAqLwpkZWNsYXJlIGNsYXNzIEFzc2V0cyBleHRlbmRzIEV2ZW50cyB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuYXV0b1N1YnNjcmliZSAtIFdoZXRoZXIgdG8gYXV0byBzdWJzY3JpYmUgdG8gYXNzZXQgY2hhbmdlcyB3aGVuIGFzc2V0cyBhcmUgbG9hZGVkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zPzogewogICAgICAgIGF1dG9TdWJzY3JpYmU6IGJvb2xlYW47CiAgICB9KTsKICAgIF91bmlxdWVJZFRvSXRlbUlkOiB7fTsKICAgIF9hc3NldHM6IE9ic2VydmVyTGlzdDsKICAgIF9wYXJzZVNjcmlwdENhbGxiYWNrOiBGdW5jdGlvbjsKICAgIF9kZWZhdWx0VXBsb2FkQ29tcGxldGVkQ2FsbGJhY2s6IEZ1bmN0aW9uOwogICAgX2RlZmF1bHRVcGxvYWRQcm9ncmVzc0NhbGxiYWNrOiBGdW5jdGlvbjsKICAgIF9kZWZhdWx0VXBsb2FkRXJyb3JDYWxsYmFjazogRnVuY3Rpb247CiAgICBfdXBsb2FkSWQ6IG51bWJlcjsKICAgIF9hdXRvU3Vic2NyaWJlOiBib29sZWFuOwogICAgX29uTWVzc2VuZ2VyQWRkQXNzZXQoZGF0YTogYW55KTogdm9pZDsKICAgIF9vbk1lc3NlbmdlckRlbGV0ZUFzc2V0KGRhdGE6IGFueSk6IHZvaWQ7CiAgICBfb25NZXNzZW5nZXJEZWxldGVBc3NldHMoZGF0YTogYW55KTogdm9pZDsKICAgIC8qKgogICAgICogR2V0cyBhc3NldCBieSBpZAogICAgICoKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIFRoZSBhc3NldCBpZAogICAgICogQHJldHVybnMge0Fzc2V0fSBUaGUgYXNzZXQKICAgICAqLwogICAgZ2V0KGlkOiBudW1iZXIpOiBBc3NldDsKICAgIC8qKgogICAgICogR2V0cyBhc3NldCBieSBpdHMgdW5pcXVlIGlkCiAgICAgKgogICAgICogQHBhcmFtIHtudW1iZXJ9IHVuaXF1ZUlkIC0gVGhlIHVuaXF1ZSBpZAogICAgICogQHJldHVybnMge0Fzc2V0fSBUaGUgYXNzZXQKICAgICAqLwogICAgZ2V0VW5pcXVlKHVuaXF1ZUlkOiBudW1iZXIpOiBBc3NldDsKICAgIC8qKgogICAgICogUmV0dXJucyBhcnJheSBvZiBhbGwgYXNzZXRzCiAgICAgKgogICAgICogQHJldHVybnMge0Fzc2V0W119IFRoZSBhc3NldHMKICAgICAqLwogICAgbGlzdCgpOiBBc3NldFtdOwogICAgLyoqCiAgICAgKiBGaW5kcyBhbGwgYXNzZXRzIHdpdGggc3BlY2lmaWVkIHRhZ3MKICAgICAqCiAgICAgKiBAcGFyYW0gey4uLnN0cmluZ3wuLi5zdHJpbmdbXX0gdGFncyAtIFRoZSB0YWdzLiBJZiBtdWx0aXBsZSB0YWdzIGFyZSBzcGVjaWZpZWQgdGhlbiBhc3NldHMgdGhhdCBjb250YWluIEFOWSBvZiB0aGUgc3BlY2lmaWVkCiAgICAgKiB0YWdzIHdpbGwgYmUgaW5jbHVkZWQuIElmIGFuIGFyZ3VtZW50IGlzIGFuIGFycmF5IG9mIHRhZ3MgdGhlbiBhc3NldHMgdGhhdCBjb250YWluIEFMTCBvZiB0aGUgdGFncyBpbiB0aGUgYXJyYXkgd2lsbCBiZSBpbmNsdWRlZC4KICAgICAqIEByZXR1cm5zIHtBc3NldFtdfSBUaGUgYXNzZXRzCiAgICAgKi8KICAgIGxpc3RCeVRhZyguLi50YWdzOiBhbnlbXSk6IEFzc2V0W107CiAgICAvKioKICAgICAqIEFkZHMgYXNzZXQgdG8gdGhlIGxpc3QKICAgICAqCiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqIEBwYXJhbSB7QXNzZXR9IGFzc2V0IC0gVGhlIGFzc2V0CiAgICAgKi8KICAgIGFkZChhc3NldDogQXNzZXQpOiB2b2lkOwogICAgLyoqCiAgICAgKiBSZW1vdmVzIGFzc2V0IGZyb20gdGhlIGxpc3QKICAgICAqCiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqIEBwYXJhbSB7QXNzZXR9IGFzc2V0IC0gVGhlIGFzc2V0CiAgICAgKi8KICAgIHJlbW92ZShhc3NldDogQXNzZXQpOiB2b2lkOwogICAgLyoqCiAgICAgKiBSZW1vdmVzIGFsbCBhc3NldHMgZnJvbSB0aGUgbGlzdAogICAgICoKICAgICAqIEBjYXRlZ29yeSBJbnRlcm5hbAogICAgICovCiAgICBjbGVhcigpOiB2b2lkOwogICAgLyoqCiAgICAgKiBHZXRzIGFzc2V0cyB0aGF0IHNhdGlzZnkgZnVuY3Rpb24KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiAodGFrZXMgYW4gYXNzZXQgYXMgYW4gYXJndW1lbnQgYW5kIHJldHVybnMgYm9vbGVhbikuCiAgICAgKiBAcmV0dXJucyB7QXNzZXRbXX0gVGhlIGFzc2V0cwogICAgICovCiAgICBmaWx0ZXIoZm46IEZ1bmN0aW9uKTogQXNzZXRbXTsKICAgIC8qKgogICAgICogRmluZHMgZmlyc3QgYXNzZXQgdGhhdCBzYXRpc2ZpZXMgZnVuY3Rpb24KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiBhc3NldCBhcyBhbiBhcmd1bWVudCBhbmQgcmV0dXJucyBib29sZWFuLgogICAgICogQHJldHVybnMge0Fzc2V0fSBUaGUgYXNzZXQKICAgICAqLwogICAgZmluZE9uZShmbjogRnVuY3Rpb24pOiBBc3NldDsKICAgIC8qKgogICAgICogTG9hZHMgYWxsIGFzc2V0cyBpbiB0aGUgY3VycmVudCBwcm9qZWN0IC8gYnJhbmNoLiBEb2VzIG5vdAogICAgICogc3Vic2NyaWJlIHRvIHJlYWx0aW1lIGNoYW5nZXMuCiAgICAgKgogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnZpZXcgLSBUaGUgZGVzaXJlZCB2aWV3IGZvciB0aGUgUkVTVCBBUEkgZS5nICdkZXNpZ25lcicsICdzaGFkZXItZWRpdG9yJy4gVGhpcyBtaWdodCBsaW1pdAogICAgICogdGhlIGFzc2V0cyByZXR1cm5lZCB0byBhIHNtYWxsZXIgc3Vic2V0IGRlcGVuZGluZyBvbiB0aGUgdmlldy4KICAgICAqLwogICAgbG9hZEFsbChvcHRpb25zPzogewogICAgICAgIHZpZXc6IHN0cmluZzsKICAgIH0pOiBQcm9taXNlPHZvaWQ+OwogICAgLyoqCiAgICAgKiBMb2FkcyBhbGwgYXNzZXRzIGluIHRoZSBjdXJyZW50IHByb2plY3QgLyBicmFuY2gKICAgICAqIGFuZCBzdWJzY3JpYmVzIHRvIGNoYW5nZXMuCiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy52aWV3IC0gVGhlIGRlc2lyZWQgdmlldyBmb3IgdGhlIFJFU1QgQVBJIGUuZyAnZGVzaWduZXInLCAnc2hhZGVyLWVkaXRvcicuIFRoaXMgbWlnaHQgbGltaXQKICAgICAqIHRoZSBhc3NldHMgcmV0dXJuZWQgdG8gYSBzbWFsbGVyIHN1YnNldCBkZXBlbmRpbmcgb24gdGhlIHZpZXcuCiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqLwogICAgbG9hZEFsbEFuZFN1YnNjcmliZShvcHRpb25zPzogewogICAgICAgIHZpZXc6IHN0cmluZzsKICAgIH0pOiBQcm9taXNlPHZvaWQ+OwogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBmaXJzdCBzY3JpcHQgYXNzZXQgdGhhdCBjb250YWlucyB0aGUgc3BlY2lmaWVkIHNjcmlwdAogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzY3JpcHQgLSBUaGUgc2NyaXB0IG5hbWUKICAgICAqIEByZXR1cm5zIHtBc3NldH0gVGhlIHNjcmlwdCBhc3NldAogICAgICovCiAgICBnZXRBc3NldEZvclNjcmlwdChzY3JpcHQ6IHN0cmluZyk6IEFzc2V0OwogICAgLyoqCiAgICAgKiBDcmVhdGVzIG5ldyBhc3NldAogICAgICoKICAgICAqIEBwcml2YXRlCiAgICAgKiBAcGFyYW0ge0Fzc2V0VXBsb2FkQXJndW1lbnRzfSBkYXRhIC0gVGhlIGFzc2V0IGZpZWxkcwogICAgICogQHBhcmFtIHtUZXh0dXJlSW1wb3J0U2V0dGluZ3N8U2NlbmVJbXBvcnRTZXR0aW5nc30gc2V0dGluZ3MgLSBJbXBvcnQgc2V0dGluZ3MKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uUHJvZ3Jlc3MgLSBGdW5jdGlvbiB0byByZXBvcnQgcHJvZ3Jlc3MKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFzc2V0Pn0gVGhlIG5ldyBhc3NldAogICAgICovCiAgICBwcml2YXRlIHVwbG9hZDsKICAgIC8qKgogICAgICogQ3JlYXRlcyBuZXcgYW5pbSBzdGF0ZSBncmFwaCBhc3NldC4KICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm5hbWUgLSBUaGUgYXNzZXQgbmFtZQogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnByZWxvYWQgLSBXaGV0aGVyIHRvIHByZWxvYWQgdGhlIGFzc2V0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMuZGF0YSAtIFRoZSBhc3NldCBkYXRhLiBTZWUgW2hlcmVdKEFzc2V0UHJvcGVydGllcy5tZCkgZm9yIEFuaW1zdGF0ZWdyYXBoIGRhdGEuCiAgICAgKiBAcGFyYW0ge0Fzc2V0fSBvcHRpb25zLmZvbGRlciAtIFRoZSBwYXJlbnQgZm9sZGVyIGFzc2V0CiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm9uUHJvZ3Jlc3MgLSBGdW5jdGlvbiB0byByZXBvcnQgcHJvZ3Jlc3MKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFzc2V0Pn0gVGhlIG5ldyBhc3NldAogICAgICovCiAgICBjcmVhdGVBbmltU3RhdGVHcmFwaChvcHRpb25zPzogewogICAgICAgIG5hbWU6IHN0cmluZzsKICAgICAgICBwcmVsb2FkOiBib29sZWFuOwogICAgICAgIGRhdGE6IG9iamVjdDsKICAgICAgICBmb2xkZXI6IEFzc2V0OwogICAgICAgIG9uUHJvZ3Jlc3M6IEZ1bmN0aW9uOwogICAgfSk6IFByb21pc2U8QXNzZXQ+OwogICAgLyoqCiAgICAgKiBDcmVhdGVzIG5ldyBidW5kbGUgYXNzZXQKICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm5hbWUgLSBUaGUgYXNzZXQgbmFtZQogICAgICogQHBhcmFtIHtBc3NldFtdfSBvcHRpb25zLmFzc2V0cyAtIFRoZSBhc3NldHMgdGhhdCB0aGUgYnVuZGxlIHdpbGwgY29udGFpbgogICAgICogQHBhcmFtIHtBc3NldH0gb3B0aW9ucy5mb2xkZXIgLSBUaGUgcGFyZW50IGZvbGRlciBhc3NldAogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnByZWxvYWQgLSBXaGV0aGVyIHRvIHByZWxvYWQgdGhlIGFzc2V0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5vblByb2dyZXNzIC0gRnVuY3Rpb24gdG8gcmVwb3J0IHByb2dyZXNzCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBc3NldD59IFRoZSBuZXcgYXNzZXQKICAgICAqLwogICAgY3JlYXRlQnVuZGxlKG9wdGlvbnM/OiB7CiAgICAgICAgbmFtZTogc3RyaW5nOwogICAgICAgIGFzc2V0czogQXNzZXRbXTsKICAgICAgICBmb2xkZXI6IEFzc2V0OwogICAgICAgIHByZWxvYWQ6IGJvb2xlYW47CiAgICAgICAgb25Qcm9ncmVzczogRnVuY3Rpb247CiAgICB9KTogUHJvbWlzZTxBc3NldD47CiAgICAvKioKICAgICAqIENyZWF0ZXMgbmV3IENTUyBhc3NldAogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubmFtZSAtIFRoZSBhc3NldCBuYW1lCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy50ZXh0IC0gVGhlIENTUwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuZm9sZGVyIC0gVGhlIHBhcmVudCBmb2xkZXIgYXNzZXQKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5wcmVsb2FkIC0gV2hldGhlciB0byBwcmVsb2FkIHRoZSBhc3NldC4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMub25Qcm9ncmVzcyAtIEZ1bmN0aW9uIHRvIHJlcG9ydCBwcm9ncmVzcwogICAgICogQHJldHVybnMge1Byb21pc2U8QXNzZXQ+fSBUaGUgbmV3IGFzc2V0CiAgICAgKi8KICAgIGNyZWF0ZUNzcyhvcHRpb25zPzogewogICAgICAgIG5hbWU6IHN0cmluZzsKICAgICAgICB0ZXh0OiBzdHJpbmc7CiAgICAgICAgZm9sZGVyOiBzdHJpbmc7CiAgICAgICAgcHJlbG9hZDogYm9vbGVhbjsKICAgICAgICBvblByb2dyZXNzOiBGdW5jdGlvbjsKICAgIH0pOiBQcm9taXNlPEFzc2V0PjsKICAgIC8qKgogICAgICogQ3JlYXRlcyBuZXcgY3ViZW1hcCBhc3NldAogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubmFtZSAtIFRoZSBhc3NldCBuYW1lCiAgICAgKiBAcGFyYW0ge0Fzc2V0W119IG9wdGlvbnMudGV4dHVyZXMgLSBUaGUgdGV4dHVyZXMgZm9yIGVhY2ggY3ViZW1hcCBmYWNlIGluIHRoaXMgb3JkZXI6CiAgICAgKiByaWdodCwgbGVmdCwgdXAsIGRvd24sIGZyb250LCBiYWNrCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5taW5GaWx0ZXIgLSBDdWJlbWFwIG1pbkZpbHRlciB2YWx1ZS4gRGVmYXVsdHMgdG8gcGMuRklMVEVSX0xJTkVBUl9NSVBNQVBfTElORUFSLgogICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMubWFnRmlsdGVyIC0gQ3ViZW1hcCBtYWdGaWx0ZXIgdmFsdWUuIERlZmF1bHRzIHRvIHBjLkZJTFRFUl9MSU5FQVIuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5hbmlzb3Ryb3B5IC0gQ3ViZW1hcCBhbmlzb3Ryb3B5IHZhbHVlLiBEZWZhdWx0cyB0byAxLgogICAgICogQHBhcmFtIHtBc3NldH0gb3B0aW9ucy5mb2xkZXIgLSBUaGUgcGFyZW50IGZvbGRlciBhc3NldAogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnByZWxvYWQgLSBXaGV0aGVyIHRvIHByZWxvYWQgdGhlIGFzc2V0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5vblByb2dyZXNzIC0gRnVuY3Rpb24gdG8gcmVwb3J0IHByb2dyZXNzCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBc3NldD59IFRoZSBuZXcgYXNzZXQKICAgICAqLwogICAgY3JlYXRlQ3ViZW1hcChvcHRpb25zPzogewogICAgICAgIG5hbWU6IHN0cmluZzsKICAgICAgICB0ZXh0dXJlczogQXNzZXRbXTsKICAgICAgICBtaW5GaWx0ZXI6IG51bWJlcjsKICAgICAgICBtYWdGaWx0ZXI6IG51bWJlcjsKICAgICAgICBhbmlzb3Ryb3B5OiBudW1iZXI7CiAgICAgICAgZm9sZGVyOiBBc3NldDsKICAgICAgICBwcmVsb2FkOiBib29sZWFuOwogICAgICAgIG9uUHJvZ3Jlc3M6IEZ1bmN0aW9uOwogICAgfSk6IFByb21pc2U8QXNzZXQ+OwogICAgLyoqCiAgICAgKiBDcmVhdGVzIGEgbmV3IGZvbGRlciBhc3NldAogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubmFtZSAtIFRoZSBhc3NldCBuYW1lCiAgICAgKiBAcGFyYW0ge0Fzc2V0fSBvcHRpb25zLmZvbGRlciAtIFRoZSBwYXJlbnQgZm9sZGVyIGFzc2V0CiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm9uUHJvZ3Jlc3MgLSBGdW5jdGlvbiB0byByZXBvcnQgcHJvZ3Jlc3MKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFzc2V0Pn0gVGhlIG5ldyBhc3NldAogICAgICovCiAgICBjcmVhdGVGb2xkZXIob3B0aW9ucz86IHsKICAgICAgICBuYW1lOiBzdHJpbmc7CiAgICAgICAgZm9sZGVyOiBBc3NldDsKICAgICAgICBvblByb2dyZXNzOiBGdW5jdGlvbjsKICAgIH0pOiBQcm9taXNlPEFzc2V0PjsKICAgIC8qKgogICAgICogQ3JlYXRlcyBuZXcgSFRNTCBhc3NldAogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubmFtZSAtIFRoZSBhc3NldCBuYW1lCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy50ZXh0IC0gVGhlIEhUTUwKICAgICAqIEBwYXJhbSB7QXNzZXR9IG9wdGlvbnMuZm9sZGVyIC0gVGhlIHBhcmVudCBmb2xkZXIgYXNzZXQKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5wcmVsb2FkIC0gV2hldGhlciB0byBwcmVsb2FkIHRoZSBhc3NldC4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMub25Qcm9ncmVzcyAtIEZ1bmN0aW9uIHRvIHJlcG9ydCBwcm9ncmVzcwogICAgICogQHJldHVybnMge1Byb21pc2U8QXNzZXQ+fSBUaGUgbmV3IGFzc2V0CiAgICAgKi8KICAgIGNyZWF0ZUh0bWwob3B0aW9ucz86IHsKICAgICAgICBuYW1lOiBzdHJpbmc7CiAgICAgICAgdGV4dDogc3RyaW5nOwogICAgICAgIGZvbGRlcjogQXNzZXQ7CiAgICAgICAgcHJlbG9hZDogYm9vbGVhbjsKICAgICAgICBvblByb2dyZXNzOiBGdW5jdGlvbjsKICAgIH0pOiBQcm9taXNlPEFzc2V0PjsKICAgIC8qKgogICAgICogQ3JlYXRlcyBuZXcgSlNPTiBhc3NldAogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubmFtZSAtIFRoZSBhc3NldCBuYW1lCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5qc29uIC0gVGhlIEpTT04KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLnNwYWNlcyAtIFRoZSBudW1iZXIgb2Ygc3BhY2VzIHVzZWQgZm9yIGluZGVudGF0aW9uLiBEZWZhdWx0cyB0byAwCiAgICAgKiAodGlnaHRseSBwYWNrZWQgb3V0cHV0KS4KICAgICAqIEBwYXJhbSB7QXNzZXR9IG9wdGlvbnMuZm9sZGVyIC0gVGhlIHBhcmVudCBmb2xkZXIgYXNzZXQKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5wcmVsb2FkIC0gV2hldGhlciB0byBwcmVsb2FkIHRoZSBhc3NldC4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMub25Qcm9ncmVzcyAtIEZ1bmN0aW9uIHRvIHJlcG9ydCBwcm9ncmVzcwogICAgICogQHJldHVybnMge1Byb21pc2U8QXNzZXQ+fSBUaGUgbmV3IGFzc2V0CiAgICAgKi8KICAgIGNyZWF0ZUpzb24ob3B0aW9ucz86IHsKICAgICAgICBuYW1lOiBzdHJpbmc7CiAgICAgICAganNvbjogb2JqZWN0OwogICAgICAgIHNwYWNlczogbnVtYmVyOwogICAgICAgIGZvbGRlcjogQXNzZXQ7CiAgICAgICAgcHJlbG9hZDogYm9vbGVhbjsKICAgICAgICBvblByb2dyZXNzOiBGdW5jdGlvbjsKICAgIH0pOiBQcm9taXNlPEFzc2V0PjsKICAgIC8qKgogICAgICogQ3JlYXRlcyBuZXcgbG9jYWxpemF0aW9uIEpTT04gYXNzZXQKICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIFRoZSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5uYW1lIC0gVGhlIGFzc2V0IG5hbWUKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zLmxvY2FsaXphdGlvbkRhdGEgLSBUaGUgbG9jYWxpemF0aW9uIGRhdGEuIElmIG51bGwgdGhlbiBkZWZhdWx0IGRhdGEgd2lsbCBiZSB1c2VkLgogICAgICogQHBhcmFtIHtBc3NldH0gb3B0aW9ucy5mb2xkZXIgLSBUaGUgcGFyZW50IGZvbGRlciBhc3NldAogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnByZWxvYWQgLSBXaGV0aGVyIHRvIHByZWxvYWQgdGhlIGFzc2V0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5vblByb2dyZXNzIC0gRnVuY3Rpb24gdG8gcmVwb3J0IHByb2dyZXNzCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBc3NldD59IFRoZSBuZXcgYXNzZXQKICAgICAqLwogICAgY3JlYXRlSTE4bihvcHRpb25zPzogewogICAgICAgIG5hbWU6IHN0cmluZzsKICAgICAgICBsb2NhbGl6YXRpb25EYXRhOiBvYmplY3Q7CiAgICAgICAgZm9sZGVyOiBBc3NldDsKICAgICAgICBwcmVsb2FkOiBib29sZWFuOwogICAgICAgIG9uUHJvZ3Jlc3M6IEZ1bmN0aW9uOwogICAgfSk6IFByb21pc2U8QXNzZXQ+OwogICAgLyoqCiAgICAgKiBDcmVhdGVzIG5ldyBtYXRlcmlhbCBhc3NldAogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubmFtZSAtIFRoZSBhc3NldCBuYW1lCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucy5kYXRhIC0gVGhlIG1hdGVyaWFsIGRhdGEuIERlZmF1bHQgdmFsdWVzIHdpbGwgYmUgdXNlZCBmb3IgbWlzc2luZyBmaWVsZHMuIFNlZSBbaGVyZV0oQXNzZXRQcm9wZXJ0aWVzLm1kKSBmb3IgbWF0ZXJpYWwgZGF0YS4KICAgICAqIEBwYXJhbSB7QXNzZXR9IG9wdGlvbnMuZm9sZGVyIC0gVGhlIHBhcmVudCBmb2xkZXIgYXNzZXQKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5wcmVsb2FkIC0gV2hldGhlciB0byBwcmVsb2FkIHRoZSBhc3NldC4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMub25Qcm9ncmVzcyAtIEZ1bmN0aW9uIHRvIHJlcG9ydCBwcm9ncmVzcwogICAgICogQHJldHVybnMge1Byb21pc2U8QXNzZXQ+fSBUaGUgbmV3IGFzc2V0CiAgICAgKi8KICAgIGNyZWF0ZU1hdGVyaWFsKG9wdGlvbnM/OiB7CiAgICAgICAgbmFtZTogc3RyaW5nOwogICAgICAgIGRhdGE6IG9iamVjdDsKICAgICAgICBmb2xkZXI6IEFzc2V0OwogICAgICAgIHByZWxvYWQ6IGJvb2xlYW47CiAgICAgICAgb25Qcm9ncmVzczogRnVuY3Rpb247CiAgICB9KTogUHJvbWlzZTxBc3NldD47CiAgICAvKioKICAgICAqIENyZWF0ZXMgbmV3IHNjcmlwdCBhc3NldAogICAgICoKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuZmlsZW5hbWUgLSBUaGUgZmlsZW5hbWUgb2YgdGhlIHNjcmlwdC4gVGhpcyB3aWxsIGFsc28gYmUgdGhlIG5hbWUgb2YgdGhlIHNjcmlwdCBhc3NldC4gSWYgbm90IGRlZmluZWQgaXQgd2lsbCBiZSBnZW5lcmF0ZWQKICAgICAqIGZyb20gdGhlIG5hbWUgb2YgdGhlIHNjcmlwdC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnRleHQgLSBUaGUgY29udGVudHMgb2YgdGhlIHNjcmlwdC4gSWYgbm9uZSB0aGVuIGJvaWxlcnBsYXRlIGNvZGUgd2lsbCBiZSB1c2VkLgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMuZGF0YSAtIFRoZSBzY3JpcHQgZGF0YS4gU2VlIFtoZXJlXShBc3NldFByb3BlcnRpZXMubWQpIGZvciBTY3JpcHQgZGF0YS4KICAgICAqIEBwYXJhbSB7QXNzZXR9IG9wdGlvbnNmb2xkZXIgLSBUaGUgcGFyZW50IGZvbGRlciBhc3NldAogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnByZWxvYWQgLSBXaGV0aGVyIHRvIHByZWxvYWQgdGhlIGFzc2V0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5vblByb2dyZXNzIC0gRnVuY3Rpb24gdG8gcmVwb3J0IHByb2dyZXNzCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBc3NldD59IFRoZSBuZXcgYXNzZXQKICAgICAqLwogICAgY3JlYXRlU2NyaXB0KG9wdGlvbnM/OiB7CiAgICAgICAgZmlsZW5hbWU6IHN0cmluZzsKICAgICAgICB0ZXh0OiBzdHJpbmc7CiAgICAgICAgZGF0YTogb2JqZWN0OwogICAgfSk6IFByb21pc2U8QXNzZXQ+OwogICAgLyoqCiAgICAgKiBDcmVhdGVzIG5ldyBzaGFkZXIgYXNzZXQKICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm5hbWUgLSBUaGUgYXNzZXQgbmFtZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudGV4dCAtIFRoZSBHTFNMCiAgICAgKiBAcGFyYW0ge0Fzc2V0fSBvcHRpb25zLmZvbGRlciAtIFRoZSBwYXJlbnQgZm9sZGVyIGFzc2V0CiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMucHJlbG9hZCAtIFdoZXRoZXIgdG8gcHJlbG9hZCB0aGUgYXNzZXQuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm9uUHJvZ3Jlc3MgLSBGdW5jdGlvbiB0byByZXBvcnQgcHJvZ3Jlc3MKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFzc2V0Pn0gVGhlIG5ldyBhc3NldAogICAgICovCiAgICBjcmVhdGVTaGFkZXIob3B0aW9ucz86IHsKICAgICAgICBuYW1lOiBzdHJpbmc7CiAgICAgICAgdGV4dDogc3RyaW5nOwogICAgICAgIGZvbGRlcjogQXNzZXQ7CiAgICAgICAgcHJlbG9hZDogYm9vbGVhbjsKICAgICAgICBvblByb2dyZXNzOiBGdW5jdGlvbjsKICAgIH0pOiBQcm9taXNlPEFzc2V0PjsKICAgIC8qKgogICAgICogQ3JlYXRlcyBuZXcgc3ByaXRlIGFzc2V0CiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5uYW1lIC0gVGhlIGFzc2V0IG5hbWUKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRpb25zLnBpeGVsc1BlclVuaXQgLSBUaGUgc3ByaXRlJ3MgcGl4ZWxzIHBlciB1bml0IHZhbHVlLiBEZWZhdWx0cyB0byAxMDAuCiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBvcHRpb25zLmZyYW1lS2V5cyAtIFRoZSBzcHJpdGUncyBmcmFtZSBrZXlzCiAgICAgKiBAcGFyYW0ge0Fzc2V0fSBvcHRpb25zLnRleHR1cmVBdGxhcyAtIFRoZSBzcHJpdGUncyB0ZXh0dXJlIGF0bGFzIGFzc2V0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5yZW5kZXJNb2RlIC0gVGhlIHNwcml0ZSdzIHJlbmRlciBtb2RlLiBEZWZhdWx0cyB0byBwYy5TUFJJVEVfUkVOREVSTU9ERV9TSU1QTEUuCiAgICAgKiBAcGFyYW0ge0Fzc2V0fSBvcHRpb25zLmZvbGRlciAtIFRoZSBwYXJlbnQgZm9sZGVyIGFzc2V0CiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMucHJlbG9hZCAtIFdoZXRoZXIgdG8gcHJlbG9hZCB0aGUgYXNzZXQuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm9uUHJvZ3Jlc3MgLSBGdW5jdGlvbiB0byByZXBvcnQgcHJvZ3Jlc3MKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEFzc2V0Pn0gVGhlIG5ldyBhc3NldAogICAgICovCiAgICBjcmVhdGVTcHJpdGUob3B0aW9ucz86IHsKICAgICAgICBuYW1lOiBzdHJpbmc7CiAgICAgICAgcGl4ZWxzUGVyVW5pdDogbnVtYmVyOwogICAgICAgIGZyYW1lS2V5czogbnVtYmVyW107CiAgICAgICAgdGV4dHVyZUF0bGFzOiBBc3NldDsKICAgICAgICByZW5kZXJNb2RlOiBudW1iZXI7CiAgICAgICAgZm9sZGVyOiBBc3NldDsKICAgICAgICBwcmVsb2FkOiBib29sZWFuOwogICAgICAgIG9uUHJvZ3Jlc3M6IEZ1bmN0aW9uOwogICAgfSk6IFByb21pc2U8QXNzZXQ+OwogICAgLyoqCiAgICAgKiBDcmVhdGVzIG5ldyB0ZXh0IGFzc2V0CiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5uYW1lIC0gVGhlIGFzc2V0IG5hbWUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnRleHQgLSBUaGUgdGV4dAogICAgICogQHBhcmFtIHtBc3NldH0gb3B0aW9ucy5mb2xkZXIgLSBUaGUgcGFyZW50IGZvbGRlciBhc3NldAogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnByZWxvYWQgLSBXaGV0aGVyIHRvIHByZWxvYWQgdGhlIGFzc2V0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5vblByb2dyZXNzIC0gRnVuY3Rpb24gdG8gcmVwb3J0IHByb2dyZXNzCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBc3NldD59IFRoZSBuZXcgYXNzZXQKICAgICAqLwogICAgY3JlYXRlVGV4dChvcHRpb25zPzogewogICAgICAgIG5hbWU6IHN0cmluZzsKICAgICAgICB0ZXh0OiBzdHJpbmc7CiAgICAgICAgZm9sZGVyOiBBc3NldDsKICAgICAgICBwcmVsb2FkOiBib29sZWFuOwogICAgICAgIG9uUHJvZ3Jlc3M6IEZ1bmN0aW9uOwogICAgfSk6IFByb21pc2U8QXNzZXQ+OwogICAgLyoqCiAgICAgKiBDcmVhdGVzIG5ldyB0ZW1wbGF0ZSBhc3NldAogICAgICoKICAgICAqIEB0eXBlZGVmIHtpbXBvcnQoIi4vZW50aXR5IikuRW50aXR5fSBFbnRpdHkKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubmFtZSAtIFRoZSBhc3NldCBuYW1lCiAgICAgKiBAcGFyYW0ge0VudGl0eX0gb3B0aW9ucy5lbnRpdHkgLSBUaGUgZW50aXR5IHRvIGNyZWF0ZSB0aGUgdGVtcGxhdGUgZnJvbQogICAgICogQHBhcmFtIHtBc3NldH0gb3B0aW9ucy5mb2xkZXIgLSBUaGUgcGFyZW50IGZvbGRlciBhc3NldAogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnByZWxvYWQgLSBXaGV0aGVyIHRvIHByZWxvYWQgdGhlIGFzc2V0LiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5vblByb2dyZXNzIC0gRnVuY3Rpb24gdG8gcmVwb3J0IHByb2dyZXNzCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxBc3NldD59IFRoZSBuZXcgYXNzZXQKICAgICAqLwogICAgY3JlYXRlVGVtcGxhdGUob3B0aW9ucz86IHsKICAgICAgICBuYW1lOiBzdHJpbmc7CiAgICAgICAgZW50aXR5OiBFbnRpdHk7CiAgICAgICAgZm9sZGVyOiBBc3NldDsKICAgICAgICBwcmVsb2FkOiBib29sZWFuOwogICAgICAgIG9uUHJvZ3Jlc3M6IEZ1bmN0aW9uOwogICAgfSk6IFByb21pc2U8QXNzZXQ+OwogICAgLyoqCiAgICAgKiBEZWxldGVzIHNwZWNpZmllZCBhc3NldHMKICAgICAqCiAgICAgKiBAcGFyYW0ge0Fzc2V0W119IGFzc2V0cyAtIFRoZSBhc3NldHMKICAgICAqLwogICAgZGVsZXRlKGFzc2V0czogQXNzZXRbXSk6IFByb21pc2U8dm9pZD47CiAgICAvKioKICAgICAqIEluc3RhbnRpYXRlcyB0aGUgc3BlY2lmaWVkIHRlbXBsYXRlIGFzc2V0cyB1bmRlciB0aGUgc3BlY2lmaWVkCiAgICAgKiBwYXJlbnQgZW50aXR5LgogICAgICoKICAgICAqIEBwYXJhbSB7QXNzZXRbXX0gYXNzZXRzIC0gVGhlIHRlbXBsYXRlIGFzc2V0cy4KICAgICAqIEBwYXJhbSB7RW50aXR5fSBwYXJlbnQgLSBUaGUgcGFyZW50IGVudGl0eQogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0aW9ucy5pbmRleCAtIFRoZSBkZXNpcmVkIGluZGV4IHVuZGVyIHRoZSBwYXJlbnQgdG8gaW5zdGFudGlhdGUgdGhlIHRlbXBsYXRlcy4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5zZWxlY3QgLSBXaGV0aGVyIHRvIHNlbGVjdCB0aGUgbmV3IGVudGl0aWVzLgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMuZXh0cmFEYXRhIC0gRXh0cmEgZGF0YSBwYXNzZWQgdG8gdGhlIGJhY2tlbmQuIFVzZWQgYnkgdGhlIEVkaXRvciBvbiBzcGVjaWZpYyBjYXNlcy4KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEVudGl0eVtdPn0gVGhlIG5ldyBlbnRpdGllcwogICAgICovCiAgICBpbnN0YW50aWF0ZVRlbXBsYXRlcyhhc3NldHM6IEFzc2V0W10sIHBhcmVudDogRW50aXR5LCBvcHRpb25zPzogewogICAgICAgIGluZGV4OiBudW1iZXI7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgICAgICBzZWxlY3Q6IGJvb2xlYW47CiAgICAgICAgZXh0cmFEYXRhOiBvYmplY3Q7CiAgICB9KTogUHJvbWlzZTxFbnRpdHlbXT47CiAgICAvKioKICAgICAqIFNldHMgdGhlIGRlZmF1bHQgY2FsbGJhY2sgY2FsbGVkIHdoZW4gb24gYXNzZXQgdXBsb2FkIHN1Y2NlZWRzLgogICAgICogVGhlIGZ1bmN0aW9uIHRha2VzIDIgYXJndW1lbnRzOiB0aGUgdXBsb2FkIGlkLCBhbmQgdGhlIG5ldyBhc3NldC4KICAgICAqCiAgICAgKiBAdHlwZSB7RnVuY3Rpb248bnVtYmVyLCBBc3NldD59CiAgICAgKi8KICAgIHNldCBkZWZhdWx0VXBsb2FkQ29tcGxldGVkQ2FsbGJhY2soYXJnOiBGdW5jdGlvbik7CiAgICAvKioKICAgICAqIEdldHMgdGhlIGRlZmF1bHQgY2FsbGJhY2sgY2FsbGVkIHdoZW4gb24gYXNzZXQgdXBsb2FkIHN1Y2NlZWRzLgogICAgICoKICAgICAqIEB0eXBlIHtGdW5jdGlvbjxudW1iZXIsIEFzc2V0Pn0KICAgICAqLwogICAgZ2V0IGRlZmF1bHRVcGxvYWRDb21wbGV0ZWRDYWxsYmFjaygpOiBGdW5jdGlvbjsKICAgIC8qKgogICAgICogU2V0cyB0aGUgZGVmYXVsdCBjYWxsYmFjayBjYWxsZWQgd2hlbiBvbiBhc3NldCB1cGxvYWQgcHJvZ3Jlc3MuCiAgICAgKiBUaGUgZnVuY3Rpb24gdGFrZXMgMiBhcmd1bWVudHM6IHRoZSB1cGxvYWQgaWQgYW5kIHRoZSBwcm9ncmVzcy4KICAgICAqCiAgICAgKiBAdHlwZSB7RnVuY3Rpb248bnVtYmVyLCBudW1iZXI+fQogICAgICovCiAgICBzZXQgZGVmYXVsdFVwbG9hZFByb2dyZXNzQ2FsbGJhY2soYXJnOiBGdW5jdGlvbik7CiAgICAvKioKICAgICAqIEdldHMgdGhlIGRlZmF1bHQgY2FsbGJhY2sgY2FsbGVkIHdoZW4gb24gYXNzZXQgdXBsb2FkIHByb2dyZXNzLgogICAgICoKICAgICAqIEB0eXBlIHtGdW5jdGlvbjxudW1iZXIsIG51bWJlcj59CiAgICAgKi8KICAgIGdldCBkZWZhdWx0VXBsb2FkUHJvZ3Jlc3NDYWxsYmFjaygpOiBGdW5jdGlvbjsKICAgIC8qKgogICAgICogU2V0cyB0aGUgZGVmYXVsdCBjYWxsYmFjayBjYWxsZWQgd2hlbiBvbiBhc3NldCB1cGxvYWQgcHJvZ3Jlc3MuCiAgICAgKiBUaGUgZnVuY3Rpb24gdGFrZXMgMiBhcmd1bWVudHM6IHRoZSB1cGxvYWQgaWQsIGFuZCB0aGUgZXJyb3IuCiAgICAgKgogICAgICogQHR5cGUge0Z1bmN0aW9uPG51bWJlciwgRXJyb3I+fQogICAgICovCiAgICBzZXQgZGVmYXVsdFVwbG9hZEVycm9yQ2FsbGJhY2soYXJnOiBGdW5jdGlvbik7CiAgICAvKioKICAgICAqIEdldHMgdGhlIGRlZmF1bHQgY2FsbGJhY2sgY2FsbGVkIHdoZW4gb24gYXNzZXQgdXBsb2FkIGZhaWxzLgogICAgICoKICAgICAqIEB0eXBlIHtGdW5jdGlvbjxudW1iZXIsIEVycm9yPn0KICAgICAqLwogICAgZ2V0IGRlZmF1bHRVcGxvYWRFcnJvckNhbGxiYWNrKCk6IEZ1bmN0aW9uOwogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBjYWxsYmFjayB3aGljaCBwYXJzZXMgc2NyaXB0IGFzc2V0cy4gV2hlbiB0aGlzCiAgICAgKiBjYWxsYmFjayBpcyBzZXQsIG5ldyBzY3JpcHQgYXNzZXRzIHdpbGwgYmUgcGFyc2VkIGFmdGVyIHRoZXkKICAgICAqIGFyZSBjcmVhdGVkLiBUaGUgZnVuY3Rpb24gdGFrZXMgdGhlIGFzc2V0IGFzIGEgcGFyYW1ldGVyIGFuZCByZXR1cm5zCiAgICAgKiBhIHByb21pc2Ugd2l0aCBhIGxpc3Qgb2Ygc2NyaXB0IG5hbWVzIHdoZW4gaXQgaXMgZG9uZSBwYXJzaW5nLgogICAgICoKICAgICAqIEB0eXBlIHtGdW5jdGlvbjxBc3NldD59CiAgICAgKi8KICAgIHNldCBwYXJzZVNjcmlwdENhbGxiYWNrKGFyZzogRnVuY3Rpb24pOwogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBjYWxsYmFjayB3aGljaCBwYXJzZXMgc2NyaXB0IGFzc2V0cy4KICAgICAqCiAgICAgKiBAdHlwZSB7RnVuY3Rpb248QXNzZXQ+fQogICAgICovCiAgICBnZXQgcGFyc2VTY3JpcHRDYWxsYmFjaygpOiBGdW5jdGlvbjsKfQoKLyoqCiAqIEhhbmRsZXMgY29ubmVjdGluZyBhbmQgY29tbXVuaWNhdGluZyB3aXRoIHRoZSBSZWFsdGltZSBzZXJ2ZXIuCiAqCiAqIEBjYXRlZ29yeSBJbnRlcm5hbAogKi8KZGVjbGFyZSBjbGFzcyBSZWFsdGltZUNvbm5lY3Rpb24gZXh0ZW5kcyBFdmVudHMgewogICAgLyoqIEB0eXBlZGVmIHtpbXBvcnQoIi4uL3JlYWx0aW1lIikuUmVhbHRpbWV9IFJlYWx0aW1lICovCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKgogICAgICogQHBhcmFtIHtSZWFsdGltZX0gcmVhbHRpbWUgLSBUaGUgcmVhbHRpbWUgQVBJCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJlYWx0aW1lOiBSZWFsdGltZSk7CiAgICBfdXJsOiBzdHJpbmc7CiAgICBfcmVhbHRpbWU6IFJlYWx0aW1lOwogICAgX3NvY2tldDogV2ViU29ja2V0OwogICAgX3NoYXJlZGI6IGFueTsKICAgIF9yZWNvbm5lY3RBdHRlbXB0czogbnVtYmVyOwogICAgX3JlY29ubmVjdEludGVydmFsOiBudW1iZXI7CiAgICBfY29ubmVjdGVkOiBib29sZWFuOwogICAgX2F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47CiAgICBfZG9tRXZ0VmlzaWJpbGl0eUNoYW5nZTogYW55OwogICAgLyoqCiAgICAgKiBDb25uZWN0IHRvIHRoZSByZWFsdGltZSBzZXJ2ZXIKICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIHNlcnZlciBVUkwKICAgICAqLwogICAgY29ubmVjdCh1cmw6IHN0cmluZyk6IHZvaWQ7CiAgICAvKioKICAgICAqIERpc2Nvbm5lY3QgZnJvbSB0aGUgc2VydmVyCiAgICAgKi8KICAgIGRpc2Nvbm5lY3QoKTogdm9pZDsKICAgIC8qKgogICAgICogU2VuZCBtZXNzYWdlIHRvIHNlcnZlcgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIG1lc3NhZ2UgbmFtZQogICAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgLSBUaGUgbWVzc2FnZSBkYXRhCiAgICAgKi8KICAgIHNlbmRNZXNzYWdlKG5hbWU6IHN0cmluZywgZGF0YTogb2JqZWN0KTogdm9pZDsKICAgIC8qKgogICAgICogU2VuZHMgYSBzdHJpbmcgdG8gdGhlIHNlcnZlcgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhIC0gVGhlIG1lc3NhZ2UgZGF0YQogICAgICovCiAgICBzZW5kKGRhdGE6IHN0cmluZyk6IHZvaWQ7CiAgICAvKioKICAgICAqIEdldHMgYSBzaGFyZWRiIGRvY3VtZW50CiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbGxlY3Rpb24gLSBUaGUgY29sbGVjdGlvbiBuYW1lCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgZG9jdW1lbnQgaWQKICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFRoZSBzaGFyZWRiIGRvY3VtZW50CiAgICAgKi8KICAgIGdldERvY3VtZW50KGNvbGxlY3Rpb246IHN0cmluZywgaWQ6IHN0cmluZyk6IG9iamVjdDsKICAgIC8qKgogICAgICogU3RhcnQgYnVsayBzdWJzY3JpYmluZyB0byBkb2N1bWVudHMKICAgICAqLwogICAgc3RhcnRCdWxrU3Vic2NyaWJlKCk6IHZvaWQ7CiAgICAvKioKICAgICAqIFN0b3AgYnVsayBzdWJzY3JpYmluZyB0byBkb2N1bWVudHMKICAgICAqLwogICAgZW5kQnVsa1N1YnNjcmliZSgpOiB2b2lkOwogICAgX29uVmlzaWJpbGl0eUNoYW5nZSgpOiB2b2lkOwogICAgX29uQ29ubmVjdCgpOiB2b2lkOwogICAgX29uRXJyb3IobXNnOiBhbnkpOiB2b2lkOwogICAgX29uQnVsa1N1YnNjcmliZUVycm9yKG1zZzogYW55KTogdm9pZDsKICAgIF9vbkNsb3NlKHJlYXNvbjogYW55LCBvcmlnaW5hbE9uQ2xvc2U6IGFueSk6IHZvaWQ7CiAgICBfb25NZXNzYWdlKG1zZzogYW55KTogYm9vbGVhbjsKICAgIF9vbk1lc3NhZ2VBdXRoKG1zZzogYW55KTogYm9vbGVhbjsKICAgIF9vbk1lc3NhZ2VTZWxlY3Rpb24obXNnOiBhbnkpOiBib29sZWFuOwogICAgX29uTWVzc2FnZUZzKG1zZzogYW55KTogYm9vbGVhbjsKICAgIF9zZW5kQXV0aCgpOiB2b2lkOwogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoZSB1c2VyIGlzIGNvbm5lY3RlZCB0byB0aGUgc2VydmVyCiAgICAgKgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBjb25uZWN0ZWQoKTogYm9vbGVhbjsKICAgIC8qKgogICAgICogV2hldGhlciB0aGUgc2VydmVyIGhhcyBhdXRoZW50aWNhdGVkIHRoZSB1c2VyCiAgICAgKgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBhdXRoZW50aWNhdGVkKCk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIEdldHMgdGhlIHNoYXJlZGIgaW5zdGFuY2UKICAgICAqCiAgICAgKiBAdHlwZSB7b2JqZWN0fQogICAgICovCiAgICBnZXQgc2hhcmVkYigpOiBhbnk7Cn0KCi8qKgogKiBSZXByZXNlbnRzIGEgc2NlbmUgaW4gc2hhcmVkYgogKgogKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICovCmRlY2xhcmUgY2xhc3MgUmVhbHRpbWVTY2VuZSBleHRlbmRzIEV2ZW50cyB7CiAgICAvKiogQHR5cGVkZWYge2ltcG9ydCgiLi4vZW50aXR5IikuRW50aXR5fSBFbnRpdHkgKi8KICAgIC8qKiBAdHlwZWRlZiB7aW1wb3J0KCIuLi9yZWFsdGltZSIpLlJlYWx0aW1lfSBSZWFsdGltZSAqLwogICAgLyoqIEB0eXBlZGVmIHtpbXBvcnQoIi4vY29ubmVjdGlvbiIpLlJlYWx0aW1lQ29ubmVjdGlvbn0gUmVhbHRpbWVDb25uZWN0aW9uICovCiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKgogICAgICogQHBhcmFtIHtudW1iZXJ9IHVuaXF1ZUlkIC0gVGhlIHVuaXF1ZSBzY2VuZSBpZAogICAgICogQHBhcmFtIHtSZWFsdGltZX0gcmVhbHRpbWUgLSBUaGUgcmVhbHRpbWUgQVBJCiAgICAgKiBAcGFyYW0ge1JlYWx0aW1lQ29ubmVjdGlvbn0gY29ubmVjdGlvbiAtIFRoZSByZWFsdGltZSBjb25uZWN0aW9uCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHVuaXF1ZUlkOiBudW1iZXIsIHJlYWx0aW1lOiBSZWFsdGltZSwgY29ubmVjdGlvbjogUmVhbHRpbWVDb25uZWN0aW9uKTsKICAgIF91bmlxdWVJZDogbnVtYmVyOwogICAgX3JlYWx0aW1lOiBSZWFsdGltZTsKICAgIF9jb25uZWN0aW9uOiBSZWFsdGltZUNvbm5lY3Rpb247CiAgICBfZG9jdW1lbnQ6IGFueTsKICAgIF9sb2FkZWQ6IGJvb2xlYW47CiAgICBfZXZ0Q29ubmVjdGlvbjogX3BsYXljYW52YXNfb2JzZXJ2ZXIuRXZlbnRIYW5kbGU7CiAgICAvKioKICAgICAqIExvYWRzIHNjZW5lIGZyb20gc2hhcmVkYiBhbmQgc3Vic2NyaWJlcyB0byBjaGFuZ2VzLgogICAgICovCiAgICBsb2FkKCk6IHZvaWQ7CiAgICAvKioKICAgICAqIFVubG9hZHMgc2NlbmUgZnJvbSBzaGFyZWRiIGFuZCB1bnN1YnNjcmliZXMgZnJvbSBjaGFuZ2VzLgogICAgICovCiAgICB1bmxvYWQoKTogdm9pZDsKICAgIC8qKgogICAgICogQWRkIGVudGl0eSB0byBzY2VuZQogICAgICoKICAgICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgLSBUaGUgZW50aXR5CiAgICAgKi8KICAgIGFkZEVudGl0eShlbnRpdHk6IEVudGl0eSk6IHZvaWQ7CiAgICAvKioKICAgICAqIFJlbW92ZXMgZW50aXR5IGZyb20gc2NlbmUgKG5vdCBmcm9tIGNoaWxkcmVuIG9mIGFub3RoZXIgZW50aXR5KQogICAgICoKICAgICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHkgLSBUaGUgZW50aXR5CiAgICAgKi8KICAgIHJlbW92ZUVudGl0eShlbnRpdHk6IEVudGl0eSk6IHZvaWQ7CiAgICAvKioKICAgICAqIFN1Ym1pdHMgc2hhcmVkYiBvcGVyYXRpb24KICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3AgLSBUaGUgb3BlcmF0aW9uCiAgICAgKi8KICAgIHN1Ym1pdE9wKG9wOiBvYmplY3QpOiB2b2lkOwogICAgLyoqCiAgICAgKiBDYWxscyB0aGUgY2FsbGJhY2sgd2hlbiB0aGVyZSBhcmUgbm8gY2hhbmdlcyBwZW5kaW5nIHRvIGJlCiAgICAgKiBzZW50IHRvIHRoZSBzZXJ2ZXIKICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjawogICAgICovCiAgICB3aGVuTm90aGluZ1BlbmRpbmcoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZDsKICAgIF9vbkVycm9yKGVycjogYW55KTogdm9pZDsKICAgIF9vbkxvYWQoKTogdm9pZDsKICAgIF9vbk9wKG9wczogYW55LCBsb2NhbDogYW55KTogdm9pZDsKICAgIC8qKgogICAgICogV2hldGhlciB0aGUgc2NlbmUgaXMgbG9hZGVkCiAgICAgKgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBsb2FkZWQoKTogYm9vbGVhbjsKICAgIC8qKgogICAgICogVGhlIHNjZW5lIGRhdGEKICAgICAqCiAgICAgKiBAdHlwZSB7b2JqZWN0fQogICAgICovCiAgICBnZXQgZGF0YSgpOiBhbnk7CiAgICAvKioKICAgICAqIFRoZSBzY2VuZSBpZCAtIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aCB0aGUgYnJhbmNoIGlkCiAgICAgKgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGlkKCk6IG51bWJlcjsKICAgIC8qKgogICAgICogVGhlIHNjZW5lJ3MgdW5pcXVlIGlkCiAgICAgKgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHVuaXF1ZUlkKCk6IG51bWJlcjsKfQoKLyoqCiAqIFByb3ZpZGVzIG1ldGhvZHMgdG8gbG9hZCBzY2VuZXMgZnJvbSBzaGFyZWRiCiAqCiAqIEBjYXRlZ29yeSBJbnRlcm5hbAogKi8KZGVjbGFyZSBjbGFzcyBSZWFsdGltZVNjZW5lcyBleHRlbmRzIEV2ZW50cyB7CiAgICAvKiogQHR5cGVkZWYge2ltcG9ydCgiLi4vcmVhbHRpbWUiKS5SZWFsdGltZX0gUmVhbHRpbWUgKi8KICAgIC8qKiBAdHlwZWRlZiB7aW1wb3J0KCIuL2Nvbm5lY3Rpb24iKS5SZWFsdGltZUNvbm5lY3Rpb259IFJlYWx0aW1lQ29ubmVjdGlvbiAqLwogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RvcgogICAgICoKICAgICAqIEBwYXJhbSB7UmVhbHRpbWV9IHJlYWx0aW1lIC0gVGhlIHJlYWx0aW1lIEFQSQogICAgICogQHBhcmFtIHtSZWFsdGltZUNvbm5lY3Rpb259IGNvbm5lY3Rpb24gLSBUaGUgcmVhbHRpbWUgY29ubmVjdGlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihyZWFsdGltZTogUmVhbHRpbWUsIGNvbm5lY3Rpb246IFJlYWx0aW1lQ29ubmVjdGlvbik7CiAgICBfcmVhbHRpbWU6IFJlYWx0aW1lOwogICAgX2Nvbm5lY3Rpb246IFJlYWx0aW1lQ29ubmVjdGlvbjsKICAgIF9zY2VuZXM6IHt9OwogICAgX2N1cnJlbnRTY2VuZTogYW55OwogICAgLyoqCiAgICAgKiBMb2FkcyBhIHNjZW5lCiAgICAgKgogICAgICogQHBhcmFtIHtudW1iZXJ9IHNjZW5lSWQgLSBUaGUgc2NlbmUgaWQKICAgICAqIEByZXR1cm5zIHtSZWFsdGltZVNjZW5lfSBUaGUgc2NlbmUKICAgICAqLwogICAgbG9hZChzY2VuZUlkOiBudW1iZXIpOiBSZWFsdGltZVNjZW5lOwogICAgLyoqCiAgICAgKiBVbmxvYWRzIGEgc2NlbmUKICAgICAqCiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NlbmVJZCAtIFRoZSBzY2VuZSBpZAogICAgICovCiAgICB1bmxvYWQoc2NlbmVJZDogbnVtYmVyKTogdm9pZDsKICAgIC8qKgogICAgICogVGhlIGN1cnJlbnQgc2NlbmUKICAgICAqCiAgICAgKiBAdHlwZSB7UmVhbHRpbWVTY2VuZX0KICAgICAqLwogICAgZ2V0IGN1cnJlbnQoKTogUmVhbHRpbWVTY2VuZTsKfQoKLyoqCiAqIFJlcHJlc2VudHMgYW4gYXNzZXQgaW4gc2hhcmVkYgogKgogKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICovCmRlY2xhcmUgY2xhc3MgUmVhbHRpbWVBc3NldCBleHRlbmRzIEV2ZW50cyB7CiAgICAvKiogQHR5cGVkZWYge2ltcG9ydCgiLi4vcmVhbHRpbWUiKS5SZWFsdGltZX0gUmVhbHRpbWUgKi8KICAgIC8qKiBAdHlwZWRlZiB7aW1wb3J0KCIuL2Nvbm5lY3Rpb24iKS5SZWFsdGltZUNvbm5lY3Rpb259IFJlYWx0aW1lQ29ubmVjdGlvbiAqLwogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3RvcgogICAgICoKICAgICAqIEBwYXJhbSB7bnVtYmVyfSB1bmlxdWVJZCAtIFRoZSB1bmlxdWUgYXNzZXQgaWQKICAgICAqIEBwYXJhbSB7UmVhbHRpbWV9IHJlYWx0aW1lIC0gVGhlIHJlYWx0aW1lIEFQSQogICAgICogQHBhcmFtIHtSZWFsdGltZUNvbm5lY3Rpb259IGNvbm5lY3Rpb24gLSBUaGUgcmVhbHRpbWUgY29ubmVjdGlvbgogICAgICoKICAgICAqLwogICAgY29uc3RydWN0b3IodW5pcXVlSWQ6IG51bWJlciwgcmVhbHRpbWU6IFJlYWx0aW1lLCBjb25uZWN0aW9uOiBSZWFsdGltZUNvbm5lY3Rpb24pOwogICAgX3VuaXF1ZUlkOiBudW1iZXI7CiAgICBfcmVhbHRpbWU6IFJlYWx0aW1lOwogICAgX2Nvbm5lY3Rpb246IFJlYWx0aW1lQ29ubmVjdGlvbjsKICAgIF9kb2N1bWVudDogYW55OwogICAgX2xvYWRlZDogYm9vbGVhbjsKICAgIF9ldnRDb25uZWN0aW9uOiBfcGxheWNhbnZhc19vYnNlcnZlci5FdmVudEhhbmRsZTsKICAgIC8qKgogICAgICogTG9hZHMgYXNzZXQgZnJvbSBzaGFyZWRiIGFuZCBzdWJzY3JpYmVzIHRvIGNoYW5nZXMuCiAgICAgKi8KICAgIGxvYWQoKTogdm9pZDsKICAgIC8qKgogICAgICogVW5sb2FkcyBhc3NldCBmcm9tIHNoYXJlZGIgYW5kIHVuc3Vic2NyaWJlcyBmcm9tIGNoYW5nZXMuCiAgICAgKi8KICAgIHVubG9hZCgpOiB2b2lkOwogICAgLyoqCiAgICAgKiBTdWJtaXRzIHNoYXJlZGIgb3BlcmF0aW9uCiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wIC0gVGhlIG9wZXJhdGlvbgogICAgICovCiAgICBzdWJtaXRPcChvcDogb2JqZWN0KTogdm9pZDsKICAgIC8qKgogICAgICogQ2FsbHMgdGhlIGNhbGxiYWNrIHdoZW4gdGhlcmUgYXJlIG5vIGNoYW5nZXMgcGVuZGluZyB0byBiZQogICAgICogc2VudCB0byB0aGUgc2VydmVyCiAgICAgKgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBUaGUgY2FsbGJhY2sKICAgICAqLwogICAgd2hlbk5vdGhpbmdQZW5kaW5nKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQ7CiAgICBfb25FcnJvcihlcnI6IGFueSk6IHZvaWQ7CiAgICBfb25Mb2FkKCk6IHZvaWQ7CiAgICBfb25PcChvcHM6IGFueSwgbG9jYWw6IGFueSk6IHZvaWQ7CiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhlIGFzc2V0IGlzIGxvYWRlZAogICAgICoKICAgICAqIEB0eXBlIHtib29sZWFufQogICAgICovCiAgICBnZXQgbG9hZGVkKCk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIFRoZSBhc3NldCBkYXRhCiAgICAgKgogICAgICogQHR5cGUge29iamVjdH0KICAgICAqLwogICAgZ2V0IGRhdGEoKTogYW55OwogICAgLyoqCiAgICAgKiBUaGUgYXNzZXQgaWQgLSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGggYnJhbmNoIGlkCiAgICAgKgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGlkKCk6IG51bWJlcjsKICAgIC8qKgogICAgICogVGhlIGFzc2V0J3MgdW5pcXVlIGlkCiAgICAgKgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHVuaXF1ZUlkKCk6IG51bWJlcjsKfQoKLyoqCiAqIFByb3ZpZGVzIG1ldGhvZHMgdG8gbG9hZCBhc3NldHMgZnJvbSBzaGFyZWRiCiAqCiAqIEBjYXRlZ29yeSBJbnRlcm5hbAogKi8KZGVjbGFyZSBjbGFzcyBSZWFsdGltZUFzc2V0cyBleHRlbmRzIEV2ZW50cyB7CiAgICAvKiogQHR5cGVkZWYge2ltcG9ydCgiLi4vcmVhbHRpbWUiKS5SZWFsdGltZX0gUmVhbHRpbWUgKi8KICAgIC8qKiBAdHlwZWRlZiB7aW1wb3J0KCIuLi9yZWFsdGltZS9jb25uZWN0aW9uIikuUmVhbHRpbWVDb25uZWN0aW9ufSBSZWFsdGltZUNvbm5lY3Rpb24gKi8KICAgIC8qKgogICAgICogQ29uc3RydWN0b3IKICAgICAqCiAgICAgKiBAcGFyYW0ge1JlYWx0aW1lfSByZWFsdGltZSAtIFRoZSByZWFsdGltZSBBUEkKICAgICAqIEBwYXJhbSB7UmVhbHRpbWVDb25uZWN0aW9ufSBjb25uZWN0aW9uIC0gVGhlIHJlYWx0aW1lIGNvbm5lY3Rpb24KICAgICAqLwogICAgY29uc3RydWN0b3IocmVhbHRpbWU6IFJlYWx0aW1lLCBjb25uZWN0aW9uOiBSZWFsdGltZUNvbm5lY3Rpb24pOwogICAgX3JlYWx0aW1lOiBSZWFsdGltZTsKICAgIF9jb25uZWN0aW9uOiBSZWFsdGltZUNvbm5lY3Rpb247CiAgICBfYXNzZXRzOiB7fTsKICAgIC8qKgogICAgICogTG9hZHMgYW4gYXNzZXQKICAgICAqCiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWQgLSBUaGUgYXNzZXQncyB1bmlxdWUgaWQKICAgICAqIEByZXR1cm5zIHtSZWFsdGltZUFzc2V0fSBUaGUgYXNzZXQKICAgICAqLwogICAgbG9hZChpZDogbnVtYmVyKTogUmVhbHRpbWVBc3NldDsKICAgIC8qKgogICAgICogR2V0cyBhbiBhbHJlYWR5IGxvYWRlZCBhc3NldAogICAgICoKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpZCAtIFRoZSBhc3NldCdzIHVuaXF1ZSBpZAogICAgICogQHJldHVybnMge1JlYWx0aW1lQXNzZXR9IFRoZSBhc3NldAogICAgICovCiAgICBnZXQoaWQ6IG51bWJlcik6IFJlYWx0aW1lQXNzZXQ7CiAgICAvKioKICAgICAqIFVubG9hZHMgYW4gYXNzZXQKICAgICAqCiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWQgLSBUaGUgYXNzZXQncyB1bmlxdWUgaWQKICAgICAqLwogICAgdW5sb2FkKGlkOiBudW1iZXIpOiB2b2lkOwp9CgovKioKICogUHJvdmlkZXMgbWV0aG9kcyB0byBjb21tdW5pY2F0ZSBhbmQgbG9hZCAvIHNhdmUgZGF0YSB0byB0aGUgcmVhbHRpbWUgc2VydmVyCiAqCiAqIEBjYXRlZ29yeSBJbnRlcm5hbAogKi8KZGVjbGFyZSBjbGFzcyBSZWFsdGltZSBleHRlbmRzIEV2ZW50cyB7CiAgICBfY29ubmVjdGlvbjogUmVhbHRpbWVDb25uZWN0aW9uOwogICAgX3NjZW5lczogUmVhbHRpbWVTY2VuZXM7CiAgICBfYXNzZXRzOiBSZWFsdGltZUFzc2V0czsKICAgIC8qKgogICAgICogR2V0cyB0aGUgcmVhbHRpbWUgY29ubmVjdGlvbgogICAgICoKICAgICAqIEB0eXBlIHtSZWFsdGltZUNvbm5lY3Rpb259CiAgICAgKi8KICAgIGdldCBjb25uZWN0aW9uKCk6IFJlYWx0aW1lQ29ubmVjdGlvbjsKICAgIC8qKgogICAgICogR2V0cyB0aGUgcmVhbHRpbWUgc2NlbmVzIEFQSQogICAgICoKICAgICAqIEB0eXBlIHtSZWFsdGltZVNjZW5lc30KICAgICAqLwogICAgZ2V0IHNjZW5lcygpOiBSZWFsdGltZVNjZW5lczsKICAgIC8qKgogICAgICogR2V0cyB0aGUgcmVhbHRpbWUgYXNzZXRzIEFQSQogICAgICoKICAgICAqIEB0eXBlIHtSZWFsdGltZUFzc2V0c30KICAgICAqLwogICAgZ2V0IGFzc2V0cygpOiBSZWFsdGltZUFzc2V0czsKfQoKLyoqCiAqIFByb3ZpZGVzIG1ldGhvZHMgdG8gYWNjZXNzIHRoZSBjb21wb25lbnRzIHNjaGVtYQogKi8KZGVjbGFyZSBjbGFzcyBDb21wb25lbnRTY2hlbWEgewogICAgLyoqIEB0eXBlZGVmIHtpbXBvcnQoIi4uL3NjaGVtYSIpLlNjaGVtYX0gU2NoZW1hICovCiAgICAvKioKICAgICAqIENyZWF0ZXMgbmV3IGluc3RhbmNlIG9mIEFQSQogICAgICoKICAgICAqIEBjYXRlZ29yeSBJbnRlcm5hbAogICAgICogQHBhcmFtIHtTY2hlbWF9IHNjaGVtYSAtIFRoZSBzY2hlbWEgQVBJCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHNjaGVtYTogU2NoZW1hKTsKICAgIF9zY2hlbWFBcGk6IFNjaGVtYTsKICAgIF9zY2hlbWE6IGFueTsKICAgIF9yZXNvbHZlTGF6eURlZmF1bHRzKGRlZmF1bHRzOiBhbnkpOiB2b2lkOwogICAgLyoqCiAgICAgKiBHZXRzIGRlZmF1bHQgZGF0YSBmb3IgYSBjb21wb25lbnQKICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50IC0gVGhlIGNvbXBvbmVudCBuYW1lCiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBUaGUgZGVmYXVsdCBkYXRhCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogY29uc3QgbW9kZWxEYXRhID0gZWRpdG9yLnNjaGVtYS5jb21wb25lbnRzLmdldERlZmF1bHREYXRhKCdtb2RlbCcpOwogICAgICogYGBgCiAgICAgKi8KICAgIGdldERlZmF1bHREYXRhKGNvbXBvbmVudDogc3RyaW5nKTogb2JqZWN0OwogICAgLyoqCiAgICAgKiBHZXRzIGEgbGlzdCBvZiBmaWVsZHMgb2YgYSBwYXJ0aWN1bGFyIHR5cGUgZm9yIGEgY29tcG9uZW50CiAgICAgKgogICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudE5hbWUgLSBUaGUgY29tcG9uZW50IG5hbWUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIGRlc2lyZWQgdHlwZQogICAgICogQHJldHVybnMge3N0cmluZ1tdfSBBIGxpc3Qgb2YgZmllbGRzCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogY29uc3QgYnV0dG9uRW50aXR5RmllbGRzID0gZWRpdG9yLnNjaGVtYS5jb21wb25lbnRzLmdldEZpZWxkc09mVHlwZSgnYnV0dG9uJywgJ2VudGl0eScpOwogICAgICogYGBgCiAgICAgKi8KICAgIGdldEZpZWxkc09mVHlwZShjb21wb25lbnROYW1lOiBzdHJpbmcsIHR5cGU6IHN0cmluZyk6IHN0cmluZ1tdOwogICAgLyoqCiAgICAgKiBHZXRzIGEgbGlzdCBvZiBhbGwgdGhlIGF2YWlsYWJsZSBjb21wb25lbnRzCiAgICAgKgogICAgICogQHJldHVybnMge3N0cmluZ1tdfSBUaGUgY29tcG9uZW50cwogICAgICovCiAgICBsaXN0KCk6IHN0cmluZ1tdOwp9CgovKioKICogUHJvdmlkZXMgbWV0aG9kcyB0byBhY2Nlc3MgdGhlIEFzc2V0cyBzY2hlbWEKICovCmRlY2xhcmUgY2xhc3MgQXNzZXRzU2NoZW1hIHsKICAgIC8qKiBAdHlwZWRlZiB7aW1wb3J0KCIuLi9zY2hlbWEiKS5TY2hlbWF9IFNjaGVtYSAqLwogICAgLyoqCiAgICAgKgogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKiBAcGFyYW0ge1NjaGVtYX0gc2NoZW1hIC0gVGhlIHNjaGVtYSBBUEkKICAgICAqLwogICAgY29uc3RydWN0b3Ioc2NoZW1hOiBTY2hlbWEpOwogICAgX3NjaGVtYUFwaTogU2NoZW1hOwogICAgX3NjaGVtYTogYW55OwogICAgLyoqCiAgICAgKiBHZXRzIGRlZmF1bHQgZGF0YSBmb3IgYXNzZXQgdHlwZQogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIGFzc2V0IHR5cGUKICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFRoZSBkZWZhdWx0IGRhdGEKICAgICAqLwogICAgZ2V0RGVmYXVsdERhdGEodHlwZTogc3RyaW5nKTogb2JqZWN0OwogICAgLyoqCiAgICAgKiBHZXRzIGEgbGlzdCBvZiBmaWVsZHMgb2YgYSBwYXJ0aWN1bGFyIHR5cGUgZm9yIGFuIGFzc2V0IHR5cGUKICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXNzZXRUeXBlIC0gVGhlIHR5cGUgb2YgdGhlIGFzc2V0LgogICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUaGUgZGVzaXJlZCB0eXBlCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IEEgbGlzdCBvZiBmaWVsZHMKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiBjb25zdCBtYXRlcmlhbEFzc2V0UGF0aHMgPSBlZGl0b3Iuc2NoZW1hLmFzc2V0cy5nZXRGaWVsZHNPZlR5cGUoJ21hdGVyaWFsJywgJ2Fzc2V0Jyk7CiAgICAgKiBgYGAKICAgICAqLwogICAgZ2V0RmllbGRzT2ZUeXBlKGFzc2V0VHlwZTogc3RyaW5nLCB0eXBlOiBzdHJpbmcpOiBzdHJpbmdbXTsKfQoKLyoqCiAqIFByb3ZpZGVzIG1ldGhvZHMgdG8gYWNjZXNzIHRoZSBFZGl0b3Igc2NoZW1hLgogKi8KZGVjbGFyZSBjbGFzcyBTY2hlbWEgewogICAgLyoqCiAgICAgKiBDcmVhdGVzIG5ldyBpbnN0YW5jZSBvZiBBUEkKICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gc2NoZW1hIC0gVGhlIEVkaXRvciBzY2hlbWEgb2JqZWN0CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHNjaGVtYTogb2JqZWN0KTsKICAgIF9zY2hlbWE6IGFueTsKICAgIF9jb21wb25lbnRTY2hlbWE6IENvbXBvbmVudFNjaGVtYTsKICAgIF9hc3NldHNTY2hlbWE6IEFzc2V0c1NjaGVtYTsKICAgIC8qKgogICAgICogR2V0cyB0aGUgY29tcG9uZW50IHNjaGVtYQogICAgICoKICAgICAqIEB0eXBlIHtDb21wb25lbnRTY2hlbWF9CiAgICAgKi8KICAgIGdldCBjb21wb25lbnRzKCk6IENvbXBvbmVudFNjaGVtYTsKICAgIC8qKgogICAgICogR2V0cyB0aGUgYXNzZXRzIHNjaGVtYQogICAgICoKICAgICAqIEB0eXBlIHtBc3NldHNTY2hlbWF9CiAgICAgKi8KICAgIGdldCBhc3NldHMoKTogQXNzZXRzU2NoZW1hOwogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0aGUgc3BlY2lmaWVkIHNjaGVtYSBmaWVsZCB0byBhIHR5cGUgcmVjdXJzaXZlbHkuCiAgICAgKgogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZmllbGQgLSBUaGUgc2NoZW1hIG9iamVjdCBvciBmaWVsZCBvZiBhIHBhcmVudCBzY2hlbWEgb2JqZWN0LgogICAgICogQHBhcmFtIHtib29sZWFufSBmaXhlZExlbmd0aCAtIFdoZXRoZXIgdGhlIHNwZWNpZmllZCBzY2hlbWEgZmllbGQgaGFzIGEgZml4ZWQgbGVuZ3RoIGlmIGl0J3MgYW4gYXJyYXkgdHlwZS4KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSB0eXBlCiAgICAgKi8KICAgIGdldFR5cGUoZmllbGQ6IG9iamVjdCwgZml4ZWRMZW5ndGg6IGJvb2xlYW4pOiBzdHJpbmc7Cn0KCi8qKgogKiBTZWxlY3Rpb24gQVBJLiBBbGxvd3Mgc2VsZWN0aW5nIEVudGl0aWVzLCBBc3NldHMgZXRjLgogKi8KZGVjbGFyZSBjbGFzcyBTZWxlY3Rpb24gZXh0ZW5kcyBFdmVudHMgewogICAgX2hpc3Rvcnk6IFNlbGVjdGlvbkhpc3Rvcnk7CiAgICBfaXRlbXM6IGFueVtdOwogICAgX2VuYWJsZWQ6IGJvb2xlYW47CiAgICBfdGltZW91dENoYW5nZTogYW55OwogICAgLyoqCiAgICAgKiBGaXJlICdjaGFuZ2UnIGV2ZW50IGluIHRpbWVvdXQKICAgICAqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCiAgICBwcml2YXRlIF9kZWZlckNoYW5nZUV2dDsKICAgIC8qKgogICAgICogQWRkIGl0ZW0gdG8gc2VsZWN0aW9uCiAgICAgKgogICAgICogQHBhcmFtIHthbnl9IGl0ZW0gLSBUaGUgaXRlbQogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuaGlzdG9yeSAtIFdoZXRoZXIgdG8gcmVjb3JkIGEgaGlzdG9yeSBhY3Rpb24uIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogLy8gYWRkIHJvb3QgZW50aXR5IHRvIHNlbGVjdGlvbgogICAgICogZWRpdG9yLnNlbGVjdGlvbi5hZGQoZWRpdG9yLmVudGl0aWVzLnJvb3QpOwogICAgICogYGBgCiAgICAgKi8KICAgIGFkZChpdGVtOiBhbnksIG9wdGlvbnM/OiB7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgIH0pOiB2b2lkOwogICAgLyoqCiAgICAgKiBSZW1vdmUgaXRlbSBmcm9tIHNlbGVjdGlvbgogICAgICoKICAgICAqIEBwYXJhbSB7YW55fSBpdGVtIC0gVGhlIGl0ZW0KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucwogICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLmhpc3RvcnkgLSBXaGV0aGVyIHRvIHJlY29yZCBhIGhpc3RvcnkgYWN0aW9uLiBEZWZhdWx0cyB0byB0cnVlLgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIC8vIHJlbW92ZSByb290IGVudGl0eSBmcm9tIHNlbGVjdGlvbgogICAgICogZWRpdG9yLnNlbGVjdGlvbi5yZW1vdmUoZWRpdG9yLmVudGl0aWVzLnJvb3QpOwogICAgICogYGBgCiAgICAgKi8KICAgIHJlbW92ZShpdGVtOiBhbnksIG9wdGlvbnM/OiB7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgIH0pOiB2b2lkOwogICAgLyoqCiAgICAgKiBUb2dnbGUgaXRlbSBzZWxlY3Rpb24KICAgICAqCiAgICAgKiBAcGFyYW0ge2FueX0gaXRlbSAtIFRoZSBpdGVtCiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiAvLyB0b2dnbGUgcm9vdCBlbnRpdHkgc2VsZWN0aW9uCiAgICAgKiBlZGl0b3Iuc2VsZWN0aW9uLnRvZ2dsZShlZGl0b3IuZW50aXRpZXMucm9vdCk7CiAgICAgKiBgYGAKICAgICAqLwogICAgdG9nZ2xlKGl0ZW06IGFueSwgb3B0aW9ucz86IHsKICAgICAgICBoaXN0b3J5OiBib29sZWFuOwogICAgfSk6IHZvaWQ7CiAgICAvKioKICAgICAqIENoZWNrcyBpZiBpdGVtIGlzIGluIHNlbGVjdGlvbgogICAgICoKICAgICAqIEBwYXJhbSB7YW55fSBpdGVtIC0gVGhlIGl0ZW0KICAgICAqIEByZXR1cm5zIHtib29sZWFufSBJZiBpdGVtIGlzIGluIHNlbGVjdGlvbgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IGlzUm9vdFNlbGVjdGVkID0gZWRpdG9yLnNlbGVjdGlvbi5oYXMoZWRpdG9yLmVudGl0aWVzLnJvb3QpOwogICAgICogYGBgCiAgICAgKi8KICAgIGhhcyhpdGVtOiBhbnkpOiBib29sZWFuOwogICAgLyoqCiAgICAgKiBDbGVhcnMgc2VsZWN0aW9uCiAgICAgKgogICAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuaGlzdG9yeSAtIFdoZXRoZXIgdG8gcmVjb3JkIGEgaGlzdG9yeSBhY3Rpb24uIERlZmF1bHRzIHRvIHRydWUuCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogZWRpdG9yLnNlbGVjdGlvbi5jbGVhcigpOwogICAgICogYGBgCiAgICAgKi8KICAgIGNsZWFyKG9wdGlvbnM/OiB7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgIH0pOiB2b2lkOwogICAgLyoqCiAgICAgKiBTZXRzIGN1cnJlbnQgc2VsZWN0aW9uCiAgICAgKgogICAgICogQHBhcmFtIHthbnlbXX0gaXRlbXMgLSBUaGUgaXRlbXMgdG8gc2VsZWN0CiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5oaXN0b3J5IC0gV2hldGhlciB0byByZWNvcmQgYSBoaXN0b3J5IGFjdGlvbi4gRGVmYXVsdHMgdG8gdHJ1ZS4KICAgICAqIEB0eXBlIHthbnlbXX0KICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiAvLyBzZWxlY3Qgcm9vdCBlbnRpdHkKICAgICAqIGVkaXRvci5zZWxlY3Rpb24uc2V0KFtlZGl0b3IuZW50aXRpZXMucm9vdF0pOwogICAgICogYGBgCiAgICAgKi8KICAgIHNldChpdGVtczogYW55W10sIG9wdGlvbnM/OiB7CiAgICAgICAgaGlzdG9yeTogYm9vbGVhbjsKICAgIH0pOiB2b2lkOwogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBzZWxlY3RlZCBpdGVtcy4gVGhpcyBjcmVhdGVzIGEgbmV3IGFycmF5IGV2ZXJ5IHRpbWUgaXQgaXMgY2FsbGVkLgogICAgICoKICAgICAqIEB0eXBlIHthbnlbXX0KICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiBlZGl0b3Iuc2VsZWN0aW9uLml0ZW1zLmFkZChlZGl0b3IuZW50aXRpZXMucm9vdCk7CiAgICAgKiBjb25zdCBzZWxlY3RlZEVudGl0aWVzID0gZWRpdG9yLnNlbGVjdGlvbi5pdGVtczsKICAgICAqIGBgYAogICAgICovCiAgICBnZXQgaXRlbXMoKTogYW55W107CiAgICAvKioKICAgICAqIEdldHMgdGhlIGZpcnN0IHNlbGVjdGVkIGl0ZW0uIFNob3J0IGZvciB0aGlzLml0ZW1zWzBdLgogICAgICoKICAgICAqIEB0eXBlIHthbnlbXX0KICAgICAqLwogICAgZ2V0IGl0ZW0oKTogYW55W107CiAgICAvKioKICAgICAqIEVuYWJsZXMgLyBkaXNhYmxlcyB0aGUgc2VsZWN0aW9uIG1ldGhvZHMKICAgICAqCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgc2V0IGVuYWJsZWQoYXJnOiBib29sZWFuKTsKICAgIGdldCBlbmFibGVkKCk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIEdldHMgdGhlIG51bWJlciBvZiBzZWxlY3RlZCBpdGVtcwogICAgICoKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCBjb3VudCgpOiBudW1iZXI7CiAgICAvKioKICAgICAqIEdldHMgdGhlIHNlbGVjdGlvbiBoaXN0b3J5CiAgICAgKgogICAgICogQHR5cGUge1NlbGVjdGlvbkhpc3Rvcnl9CiAgICAgKi8KICAgIGdldCBoaXN0b3J5KCk6IFNlbGVjdGlvbkhpc3Rvcnk7Cn0KLyoqCiAqIEVuYWJsZXMgdW5kbyAvIHJlZG8gb2Ygc2VsZWN0aW9uIGNoYW5nZXMKICovCmRlY2xhcmUgY2xhc3MgU2VsZWN0aW9uSGlzdG9yeSB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKgogICAgICogQHBhcmFtIHtTZWxlY3Rpb259IHNlbGVjdGlvbiAtIFRoZSBzZWxlY3Rpb24gQVBJCiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqLwogICAgY29uc3RydWN0b3Ioc2VsZWN0aW9uOiBTZWxlY3Rpb24pOwogICAgX3NlbGVjdGlvbjogU2VsZWN0aW9uOwogICAgX2VuYWJsZWQ6IGJvb2xlYW47CiAgICBfZXhlY3V0aW5nQWN0aW9uOiBib29sZWFuOwogICAgLyoqCiAgICAgKiBEaXNhYmxlcyAvIGVuYWJsZXMgc2VsZWN0aW9uIHVuZG8gLyByZWRvCiAgICAgKgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIHNldCBlbmFibGVkKGFyZzogYm9vbGVhbik7CiAgICBnZXQgZW5hYmxlZCgpOiBib29sZWFuOwogICAgLyoqCiAgICAgKiBSZWNvcmQgaGlzdG9yeSBhY3Rpb24gYWZ0ZXIgZXhlY3V0aW5nIGZ1bmN0aW9uLgogICAgICogVGhlIGhpc3RvcnkgYWN0aW9uIHdpbGwgcmVzdG9yZSB0aGUgcHJldmlvdXMgc2VsZWN0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIGhpc3RvcnkgYWN0aW9uIG5hbWUKICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUKICAgICAqIEBwcml2YXRlCiAgICAgKi8KICAgIHByaXZhdGUgd3JhcEFjdGlvbjsKfQoKLyoqCiAqIEEgaGlzdG9yeSBhY3Rpb24KICovCnR5cGUgSGlzdG9yeUFjdGlvbiA9IHsKICAgIC8qKgogICAgICogLSBUaGUgYWN0aW9uIG5hbWUKICAgICAqLwogICAgbmFtZTogc3RyaW5nOwogICAgLyoqCiAgICAgKiAtIFRoZSB1bmRvIGZ1bmN0aW9uCiAgICAgKi8KICAgIHVuZG86IEZ1bmN0aW9uOwogICAgLyoqCiAgICAgKiAtIFRoZSByZWRvIGZ1bmN0aW9uCiAgICAgKi8KICAgIHJlZG86IEZ1bmN0aW9uOwp9OwovKioKICogQSBoaXN0b3J5IGFjdGlvbgogKgogKiBAdHlwZWRlZiB7b2JqZWN0fSBIaXN0b3J5QWN0aW9uCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBuYW1lIC0gVGhlIGFjdGlvbiBuYW1lCiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IHVuZG8gLSBUaGUgdW5kbyBmdW5jdGlvbgogKiBAcHJvcGVydHkge0Z1bmN0aW9ufSByZWRvIC0gVGhlIHJlZG8gZnVuY3Rpb24KICovCi8qKgogKiBUaGUgaGlzdG9yeSBBUEkgcmVzcG9uc2libGUgZm9yIHVuZG8gLyByZWRvLgogKi8KZGVjbGFyZSBjbGFzcyBIaXN0b3J5IGV4dGVuZHMgRXZlbnRzIHsKICAgIF9oaXN0b3J5OiBIaXN0b3J5JDE7CiAgICAvKioKICAgICAqIEFkZHMgaGlzdG9yeSBhY3Rpb24KICAgICAqCiAgICAgKiBAcGFyYW0ge0hpc3RvcnlBY3Rpb259IGFjdGlvbiAtIFRoZSBhY3Rpb24KICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiBjb25zdCBwcmV2U2VsZWN0aW9uID0gZWRpdG9yLnNlbGVjdGlvbi5pdGVtczsKICAgICAqIGVkaXRvci5oaXN0b3J5LmFkZCh7CiAgICAgKiAgICAgbmFtZTogJ2NsZWFyIHNlbGVjdGlvbicsCiAgICAgKiAgICAgcmVkbzogKCkgPT4geyBlZGl0b3Iuc2VsZWN0aW9uLmNsZWFyKHsgaGlzdG9yeTogZmFsc2UgfSk7IH0sCiAgICAgKiAgICAgdW5kbzogKCkgPT4geyBlZGl0b3Iuc2VsZWN0aW9uLnNldChwcmV2U2VsZWN0aW9uLCB7IGhpc3Rvcnk6IGZhbHNlIH0pOyB9LAogICAgICogfSk7CiAgICAgKiBgYGAKICAgICAqLwogICAgYWRkKGFjdGlvbjogSGlzdG9yeUFjdGlvbik6IHZvaWQ7CiAgICAvKioKICAgICAqIEFkZHMgaGlzdG9yeSBhY3Rpb24gYW5kIGV4ZWN1dGUgcmVkbwogICAgICoKICAgICAqIEBwYXJhbSB7SGlzdG9yeUFjdGlvbn0gYWN0aW9uIC0gVGhlIGFjdGlvbgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGNvbnN0IHByZXZTZWxlY3Rpb24gPSBlZGl0b3Iuc2VsZWN0aW9uLml0ZW1zOwogICAgICogZWRpdG9yLmhpc3RvcnkuYWRkQW5kRXhlY3V0ZSh7CiAgICAgKiAgICAgbmFtZTogJ2NsZWFyIHNlbGVjdGlvbicsCiAgICAgKiAgICAgcmVkbzogKCkgPT4geyBlZGl0b3Iuc2VsZWN0aW9uLmNsZWFyKHsgaGlzdG9yeTogZmFsc2UgfSk7IH0sCiAgICAgKiAgICAgdW5kbzogKCkgPT4geyBlZGl0b3Iuc2VsZWN0aW9uLnNldChwcmV2U2VsZWN0aW9uLCB7IGhpc3Rvcnk6IGZhbHNlIH0pOyB9LAogICAgICogfSk7CiAgICAgKiBgYGAKICAgICAqLwogICAgYWRkQW5kRXhlY3V0ZShhY3Rpb246IEhpc3RvcnlBY3Rpb24pOiB2b2lkOwogICAgLyoqCiAgICAgKiBVbmRvIGxhc3QgYWN0aW9uCiAgICAgKgogICAgICogQGV4YW1wbGUKICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAqIGVkaXRvci5oaXN0b3J5LnVuZG8oKTsKICAgICAqIGBgYAogICAgICovCiAgICB1bmRvKCk6IHZvaWQ7CiAgICAvKioKICAgICAqIFJlZG8gbGFzdCBhY3Rpb24KICAgICAqCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBgamF2YXNjcmlwdAogICAgICogZWRpdG9yLmhpc3RvcnkucmVkbygpOwogICAgICogYGBgCiAgICAgKi8KICAgIHJlZG8oKTogdm9pZDsKICAgIC8qKgogICAgICogQ2xlYXIgaGlzdG9yeQogICAgICoKICAgICAqIEBleGFtcGxlCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiBlZGl0b3IuaGlzdG9yeS5jbGVhcigpOwogICAgICogYGBgCiAgICAgKi8KICAgIGNsZWFyKCk6IHZvaWQ7CiAgICAvKioKICAgICAqIEdldHMgdGhlIGN1cnJlbnQgYWN0aW9uCiAgICAgKgogICAgICogQHR5cGUge0hpc3RvcnlBY3Rpb259CiAgICAgKi8KICAgIGdldCBjdXJyZW50QWN0aW9uKCk6IEhpc3RvcnlBY3Rpb247CiAgICAvKioKICAgICAqIEdldHMgdGhlIGxhc3QgYWN0aW9uCiAgICAgKgogICAgICogQHR5cGUge0hpc3RvcnlBY3Rpb259CiAgICAgKi8KICAgIGdldCBsYXN0QWN0aW9uKCk6IEhpc3RvcnlBY3Rpb247CiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhlcmUgYXJlIGFueSBhY3Rpb25zIHRvIHVuZG8KICAgICAqCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgc2V0IGNhblVuZG8oYXJnOiBib29sZWFuKTsKICAgIGdldCBjYW5VbmRvKCk6IGJvb2xlYW47CiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhlcmUgYXJlIGFjdGlvbnMgdG8gcmVkbwogICAgICoKICAgICAqIEB0eXBlIHtib29sZWFufQogICAgICovCiAgICBzZXQgY2FuUmVkbyhhcmc6IGJvb2xlYW4pOwogICAgZ2V0IGNhblJlZG8oKTogYm9vbGVhbjsKfQoKLyoqCiAqIEdsb2JhbCB2YXJpYWJsZXMKICovCmRlY2xhcmUgY2xhc3MgZ2xvYmFscyB7CiAgICAvKioKICAgICAqIFRoZSBoaXN0b3J5IEFQSQogICAgICoKICAgICAqIEB0eXBlIHtpbXBvcnQoIi4vaGlzdG9yeSIpLkhpc3Rvcnl9CiAgICAgKi8KICAgIHN0YXRpYyBoaXN0b3J5OiBIaXN0b3J5OwogICAgLyoqCiAgICAgKiBUaGUgc2VsZWN0aW9uIEFQSQogICAgICoKICAgICAqIEB0eXBlIHtpbXBvcnQoIi4vc2VsZWN0aW9uIikuU2VsZWN0aW9ufQogICAgICovCiAgICBzdGF0aWMgc2VsZWN0aW9uOiBTZWxlY3Rpb247CiAgICAvKioKICAgICAqIFRoZSBzY2hlbWEgQVBJCiAgICAgKgogICAgICogQHR5cGUge2ltcG9ydCgiLi9zY2hlbWEiKS5TY2hlbWF9CiAgICAgKi8KICAgIHN0YXRpYyBzY2hlbWE6IFNjaGVtYTsKICAgIC8qKgogICAgICogVGhlIHJlYWx0aW1lIEFQSQogICAgICoKICAgICAqIEBjYXRlZ29yeSBJbnRlcm5hbAogICAgICogQHR5cGUge2ltcG9ydCgiLi9yZWFsdGltZSIpLlJlYWx0aW1lfQogICAgICovCiAgICBzdGF0aWMgcmVhbHRpbWU6IFJlYWx0aW1lOwogICAgLyoqCiAgICAgKiBUaGUgYXNzZXRzIEFQSQogICAgICoKICAgICAqIEB0eXBlIHtpbXBvcnQoIi4vYXNzZXRzIikuQXNzZXRzfQogICAgICovCiAgICBzdGF0aWMgYXNzZXRzOiBBc3NldHM7CiAgICAvKioKICAgICAqIFRoZSBlbnRpdGllcyBBUEkKICAgICAqCiAgICAgKiBAdHlwZSB7aW1wb3J0KCIuL2VudGl0aWVzIikuRW50aXRpZXN9CiAgICAgKi8KICAgIHN0YXRpYyBlbnRpdGllczogRW50aXRpZXM7CiAgICAvKioKICAgICAqIFRoZSBzZXR0aW5ncyBBUEkKICAgICAqCiAgICAgKiBAdHlwZSB7aW1wb3J0KCIuL3NldHRpbmdzIikuU2V0dGluZ3N9CiAgICAgKi8KICAgIHN0YXRpYyBzZXR0aW5nczogU2V0dGluZ3M7CiAgICAvKioKICAgICAqIFRoZSBtZXNzZW5nZXIgQVBJCiAgICAgKgogICAgICogQHR5cGUge2ltcG9ydCgiLi9tZXNzZW5nZXIiKS5NZXNzZW5nZXJ9CiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqLwogICAgc3RhdGljIG1lc3NlbmdlcjogTWVzc2VuZ2VyOwogICAgLyoqCiAgICAgKiBUaGUgam9icyBBUEkKICAgICAqCiAgICAgKiBAdHlwZSB7aW1wb3J0KCIuL2pvYnMiKS5Kb2JzfQogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKi8KICAgIHN0YXRpYyBqb2JzOiBKb2JzOwogICAgLyoqCiAgICAgKiBUaGUgbWFpbiBjbGlwYm9hcmQKICAgICAqCiAgICAgKiBAdHlwZSB7aW1wb3J0KCIuL2NsaXBib2FyZCIpLkNsaXBib2FyZH0KICAgICAqIEBjYXRlZ29yeSBJbnRlcm5hbAogICAgICovCiAgICBzdGF0aWMgY2xpcGJvYXJkOiBDbGlwYm9hcmQ7CiAgICAvKioKICAgICAqIFRoZSB1c2VyJ3MgYWNjZXNzIHRva2VuCiAgICAgKgogICAgICogQGNhdGVnb3J5IEludGVybmFsCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBzdGF0aWMgYWNjZXNzVG9rZW46IHN0cmluZzsKICAgIC8qKgogICAgICogVGhlIGN1cnJlbnQgcHJvamVjdCBpZAogICAgICoKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIHN0YXRpYyBwcm9qZWN0SWQ6IG51bWJlcjsKICAgIC8qKgogICAgICogVGhlIGN1cnJlbnQgYnJhbmNoIGlkCiAgICAgKgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIGJyYW5jaElkOiBzdHJpbmc7CiAgICAvKioKICAgICAqIFdoZXRoZXIgdGhpcyBwcm9qZWN0IGlzIHVzaW5nIGxlZ2FjeSBzY3JpcHRzCiAgICAgKgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKiBAY2F0ZWdvcnkgSW50ZXJuYWwKICAgICAqLwogICAgc3RhdGljIGhhc0xlZ2FjeVNjcmlwdHM6IGJvb2xlYW47CiAgICAvKioKICAgICAqIEFsZXJ0IGZ1bmN0aW9uIGNhbGxlZCB3aGVuIHVzZXIgY29uZmlybWF0aW9uIGlzIG5lZWRlZAogICAgICogZm9yIGFuIGFjdGlvbi4gRGVmYXVsdHMgdG8gdGhlIGRlZmF1bHQgYnJvd3NlciBwb3B1cCBidXQKICAgICAqIGNhbiBiZSBvdmVycmlkZGVuIHRvIHNob3cgeW91ciBjdXN0b20gcG9wdXAgaW5zdGVhZC4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSBjb25maXJtIGRpYWxvZyB0ZXh0CiAgICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBwb3B1cAogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMueWVzVGV4dCAtIFRleHQgZm9yICd5ZXMnIG9wdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubm9UZXh0IC0gVGV4dCBmb3IgJ25vJyBvcHRpb24KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5ub0Rpc21pc3MgLSBJZiB0cnVlIHRoZW4gdXNlciBjYW5ub3QgZGlzbWlzcyB0aGUgcG9wdXAgYW5kIHdpbGwgaGF2ZSB0byBjbGljayB5ZXMgb3Igbm8KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSBUcnVlIGlmIHRoZSB1c2VyIGNvbmZpcm1lZCwgZmFsc2Ugb3RoZXJ3aXNlCiAgICAgKi8KICAgIHN0YXRpYyBjb25maXJtRm4odGV4dDogc3RyaW5nLCBvcHRpb25zPzogewogICAgICAgIHllc1RleHQ6IHN0cmluZzsKICAgICAgICBub1RleHQ6IHN0cmluZzsKICAgICAgICBub0Rpc21pc3M6IGJvb2xlYW47CiAgICB9KTogUHJvbWlzZTxib29sZWFuPjsKfQoKLyoqCiAqIENvbnRhaW5zIHZhcmlvdXMgdXRpbGl0eSBtZXRob2RzCiAqCiAqIEBjYXRlZ29yeSBJbnRlcm5hbAogKi8KZGVjbGFyZSBjbGFzcyB1dGlscyB7CiAgICAvKioKICAgICAqIERlZXAgY29weSBhbiBvYmplY3QKICAgICAqCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIFRoZSBkYXRhIHRvIGNvcHkKICAgICAqIEByZXR1cm5zIHtvYmplY3R9IEEgY29weSBvZiB0aGUgZGF0YQogICAgICovCiAgICBzdGF0aWMgZGVlcENvcHkoZGF0YTogb2JqZWN0KTogb2JqZWN0OwogICAgc3RhdGljIGV4cGFuZFBhdGgob2JqOiBhbnksIHBhdGg6IGFueSwgZm46IGFueSk6IHZvaWQ7Cn0KCi8qKgogKiBCYXNpY2FsbHkgYSB2ZXJ5IGxhcmdlIHJhbmRvbSBudW1iZXIgKDEyOC1iaXQpIHdoaWNoIG1lYW5zIHRoZQogKiBwcm9iYWJpbGl0eSBvZiBjcmVhdGluZyB0d28gdGhhdCBjbGFzaCBpcyB2YW5pc2hpbmdseSBzbWFsbC4KICoKICogQGNhdGVnb3J5IEludGVybmFsCiAqLwpkZWNsYXJlIGNsYXNzIEd1aWQgewogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4gUkZDNDEyMiB2ZXJzaW9uIDQgY29tcGxpYW50IEdVSUQuCiAgICAgKgogICAgICogQHJldHVybnMge3N0cmluZ30gQSBuZXcgR1VJRC4KICAgICAqLwogICAgc3RhdGljIGNyZWF0ZSgpOiBzdHJpbmc7Cn0KCmV4cG9ydCB7IEFzc2V0LCBBc3NldFVwbG9hZEFyZ3VtZW50cywgQXNzZXRzLCBBc3NldHNTY2hlbWEsIENsaXBib2FyZCwgQ29tcG9uZW50U2NoZW1hLCBDcmVhdGVFbnRpdHlBcmd1bWVudHMsIEVudGl0aWVzLCBFbnRpdHksIEd1aWQsIEhpc3RvcnksIEhpc3RvcnlBY3Rpb24sIEpvYnMsIExvY2FsU3RvcmFnZSwgTWVzc2VuZ2VyLCBSZWFsdGltZSwgUmVhbHRpbWVBc3NldCwgUmVhbHRpbWVBc3NldHMsIFJlYWx0aW1lQ29ubmVjdGlvbiwgUmVhbHRpbWVTY2VuZSwgUmVhbHRpbWVTY2VuZXMsIFJlcGFyZW50QXJndW1lbnRzLCBTY2VuZUltcG9ydFNldHRpbmdzLCBTY2VuZVNldHRpbmdzLCBTY2hlbWEsIFNlbGVjdGlvbiwgU2VsZWN0aW9uSGlzdG9yeSwgU2V0dGluZ3MsIFRleHR1cmVJbXBvcnRTZXR0aW5ncywgZ2xvYmFscywgdXRpbHMgfTsKZXhwb3J0IGFzIG5hbWVzcGFjZSBhcGk7CmRlY2xhcmUgZ2xvYmFsIHsKICAgIGNvbnN0IGVkaXRvcjogdHlwZW9mIGdsb2JhbHM7Cn0K";
})();
